{
  "sbg:revisionsInfo": [
    {
      "sbg:modifiedOn": 1481139873,
      "sbg:revision": 0,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "Copy of Durga/exome-sequencing/exomeseqanalysis02-withfreebayes/4"
    },
    {
      "sbg:modifiedOn": 1481139918,
      "sbg:revision": 1,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "Changed Name"
    },
    {
      "sbg:modifiedOn": 1481141068,
      "sbg:revision": 2,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "Output format - SortedBAM (default threads)\nDuplication - Mark duplication\n\ndeleted sambamba sort and mark duplicates"
    },
    {
      "sbg:modifiedOn": 1481141157,
      "sbg:revision": 3,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": null
    },
    {
      "sbg:modifiedOn": 1481157645,
      "sbg:revision": 4,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "added\n- append_comment"
    },
    {
      "sbg:modifiedOn": 1483475270,
      "sbg:revision": 5,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "unlocked Read_group_header parameter"
    },
    {
      "sbg:modifiedOn": 1483721564,
      "sbg:revision": 6,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "removed batch mode"
    },
    {
      "sbg:modifiedOn": 1483980618,
      "sbg:revision": 7,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": "added interval_list file type to input"
    },
    {
      "sbg:modifiedOn": 1483980709,
      "sbg:revision": 8,
      "sbg:modifiedBy": "Durga",
      "sbg:revisionNotes": null
    }
  ],
  "sbg:canvas_y": 129,
  "sbg:modifiedBy": "Durga",
  "sbg:project": "Durga/exome-sequencing",
  "sbg:batchBy": {
    "type": "criteria",
    "criteria": [
      "metadata.sample_id"
    ]
  },
  "outputs": [
    {
      "label": "#aligned_reads",
      "sbg:includeInPorts": true,
      "sbg:y": 415.1272721961143,
      "id": "#aligned_reads",
      "sbg:fileTypes": "SAM, BAM",
      "type": [
        "null",
        "File"
      ],
      "source": [
        "#BWA_MEM_Bundle.aligned_reads"
      ],
      "required": false,
      "sbg:x": 1755.0477870759546
    },
    {
      "label": "report_zip",
      "sbg:includeInPorts": true,
      "sbg:y": 575.6974864304816,
      "id": "#report_zip",
      "sbg:fileTypes": "ZIP",
      "type": [
        "null",
        "File"
      ],
      "source": [
        "#FastQC.report_zip"
      ],
      "required": false,
      "sbg:x": 1749.9999863079624
    },
    {
      "label": "report_html",
      "sbg:includeInPorts": true,
      "sbg:y": 694.2689118002893,
      "id": "#report_html",
      "sbg:fileTypes": "HTML",
      "type": [
        "null",
        "File"
      ],
      "source": [
        "#FastQC.report_html"
      ],
      "required": false,
      "sbg:x": 1747.1428434508196
    },
    {
      "label": "variants",
      "sbg:includeInPorts": true,
      "sbg:y": 118.55468061087392,
      "id": "#variants",
      "sbg:fileTypes": "VCF, G.VCF",
      "type": [
        "null",
        "File"
      ],
      "source": [
        "#Freebayes.variants"
      ],
      "required": false,
      "sbg:x": 1735.7142287857719
    },
    {
      "label": "merged_bam",
      "sbg:includeInPorts": true,
      "sbg:y": 308.55465303148145,
      "id": "#merged_bam",
      "sbg:fileTypes": "BAM",
      "type": [
        "null",
        "File"
      ],
      "source": [
        "#Sambamba_Merge.merged_bam"
      ],
      "required": false,
      "sbg:x": 1894.2856766253083
    }
  ],
  "sbg:contributors": [
    "Durga"
  ],
  "sbg:createdOn": 1481139873,
  "description": "",
  "hints": [],
  "sbg:batchInput": "#fastq_list",
  "sbg:sbgMaintained": false,
  "sbg:validationErrors": [],
  "steps": [
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1477591294,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/sbg-fasta-indices/4"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "b177f5bd06db",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/djordje_klisic/sbg-fasta-indices:1.0"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 2500,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "Indexing"
        ],
        "sbg:project": "Durga/exome-sequencing",
        "id": "Durga/exome-sequencing/sbg-fasta-indices/0",
        "outputs": [
          {
            "sbg:fileTypes": "FASTA",
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "glob": {
                "script": "{\n  return $job.inputs.reference.path.split(\"/\").pop()\n}",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "secondaryFiles": [
                ".fai",
                "^.dict"
              ],
              "sbg:inheritMetadataFrom": "#reference"
            },
            "label": "Reference",
            "id": "#fasta_reference"
          },
          {
            "sbg:fileTypes": "FAI",
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "glob": "*.fai",
              "sbg:metadata": {}
            },
            "label": "FASTA Index",
            "id": "#fasta_index"
          },
          {
            "sbg:fileTypes": "DICT",
            "type": [
              "null",
              "File"
            ],
            "outputBinding": {
              "glob": "*.dict",
              "sbg:metadata": {}
            },
            "label": "FASTA Dictionary",
            "id": "#fasta_dict"
          }
        ],
        "label": "SBG FASTA Indices",
        "sbg:license": "Apache License 2.0",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1477591294,
        "description": "Tool allows creating FASTA dictionary and index simultaneously which is necessary for running GATK tools. This version of tool for indexing uses SAMtools faidx command (toolkit version0.1.19), while for the FASTA dictionary is used Picard CreateFastaDictionary (toolkit version 1.140)",
        "stdout": "",
        "arguments": [
          {
            "separate": true,
            "valueFrom": "--dict"
          },
          {
            "separate": true,
            "valueFrom": "--fai"
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/sbg-fasta-indices/4",
        "sbg:cmdPreview": "python /opt/sbg-fasta-indices.py --REFERENCE /path/to/reference.ext  --dict  --fai",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 366,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Sanja Mijalkovic, Seven Bridges Genomics, <sanja.mijalkovic@sbgenomics.com>",
        "sbg:revision": 0,
        "stdin": "",
        "baseCommand": [
          "python",
          "/opt/sbg-fasta-indices.py"
        ],
        "inputs": [
          {
            "description": "FASTA file to be indexed",
            "label": "FASTA file",
            "sbg:stageInput": "link",
            "id": "#reference",
            "type": [
              "File"
            ],
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--REFERENCE"
            },
            "required": true
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/sbg-fasta-indices/4",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1477591294,
        "appUrl": "/u/Durga/exome-sequencing/apps/#Durga/exome-sequencing/sbg-fasta-indices/0",
        "sbg:toolkit": "SBGTools",
        "sbg:job": {
          "inputs": {
            "reference": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/reference.ext"
            }
          },
          "allocatedResources": {
            "mem": 2500,
            "cpu": 1
          }
        },
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 77.79296875,
        "sbg:id": "Durga/exome-sequencing/sbg-fasta-indices/0"
      },
      "id": "#SBG_FASTA_Indices",
      "inputs": [
        {
          "source": [
            "#reference"
          ],
          "id": "#SBG_FASTA_Indices.reference"
        }
      ],
      "outputs": [
        {
          "id": "#SBG_FASTA_Indices.fasta_reference"
        },
        {
          "id": "#SBG_FASTA_Indices.fasta_index"
        },
        {
          "id": "#SBG_FASTA_Indices.fasta_dict"
        }
      ],
      "sbg:y": 77.79296875,
      "sbg:x": 366
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1477014219,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/bwa-index/15"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "2f813371e803",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/vladimirk/bwa:0.7.13"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": {
              "script": "{\n  GB_1 = 1024*1024*1024\n  reads_size = $job.inputs.reference.size\n\n  if(!reads_size) { reads_size = GB_1 }\n  \n  if($job.inputs.total_memory){\n    return $job.inputs.total_memory * 1024\n  } else {\n    return (parseInt(1.5 * reads_size / (1024*1024)))\n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "Indexing",
          "FASTA-Processing"
        ],
        "sbg:project": "Durga/exome-sequencing",
        "id": "Durga/exome-sequencing/bwa-index/0",
        "outputs": [
          {
            "description": "TARed fasta with its BWA indices.",
            "label": "TARed fasta with its BWA indices",
            "outputBinding": {
              "glob": {
                "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar'){\n    return reference_file\n  }\n  else{\n    return reference_file + '.tar'\n  }\n}\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:inheritMetadataFrom": "#reference"
            },
            "id": "#indexed_reference",
            "sbg:fileTypes": "TAR",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "BWA INDEX",
        "sbg:license": "GNU Affero General Public License v3.0, MIT License",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1477014219,
        "description": "BWA INDEX constructs the FM-index (Full-text index in Minute space) for the reference genome.\nGenerated index files will be used with BWA MEM, BWA ALN, BWA SAMPE and BWA SAMSE tools.\n\nIf input reference file has TAR extension it is assumed that BWA indices came together with it. BWA INDEX will only pass that TAR to the output. If input is not TAR, the creation of BWA indices and its packing in TAR file (together with the reference) will be performed.",
        "stdout": "",
        "arguments": [
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar' || !$job.inputs.bwt_construction){\n    return ''\n  } else {\n    return '-a ' + $job.inputs.bwt_construction\n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar' || !$job.inputs.prefix){\n    return ''\n  } else {\n    return '-p ' + $job.inputs.prefix\n  }\n}\n",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar' || !$job.inputs.block_size){\n    return ''\n  } else {\n    return '-b ' + $job.inputs.block_size\n  }\n}\n\n",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar' || !$job.inputs.add_64_to_fasta_name){\n    return ''\n  } else {\n    return '-6 '\n  }\n}\n",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar'){\n    return ''\n  }\n  else{\n    tar_cmd = 'tar -cf ' + reference_file + '.tar ' + reference_file + ' *.amb' + ' *.ann' + ' *.bwt' + ' *.pac' + ' *.sa' \n    return ' ; ' + tar_cmd\n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/bwa-index/15",
        "sbg:cmdPreview": "/opt/bwa-0.7.13/bwa index reference.fasta   -a bwtsw      -6    ; tar -cf reference.fasta.tar reference.fasta *.amb *.ann *.bwt *.pac *.sa",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 178.66664632161462,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Heng Li",
        "sbg:revision": 0,
        "stdin": "",
        "baseCommand": [
          {
            "script": "{\n  reference_file = $job.inputs.reference.path.split('/')[$job.inputs.reference.path.split('/').length-1]\n  ext = reference_file.split('.')[reference_file.split('.').length-1]\n  if(ext=='tar'){\n    return 'echo Index files passed without any processing!'\n  }\n  else{\n    index_cmd = '/opt/bwa-0.7.13/bwa index '+ reference_file + ' '\n    return index_cmd\n  }\n}",
            "class": "Expression",
            "engine": "#cwl-js-engine"
          }
        ],
        "sbg:toolkit": "BWA",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://bio-bwa.sourceforge.net/"
          },
          {
            "label": "Source code",
            "id": "https://github.com/lh3/bwa"
          },
          {
            "label": "Wiki",
            "id": "http://bio-bwa.sourceforge.net/bwa.shtml"
          },
          {
            "label": "Download",
            "id": "http://sourceforge.net/projects/bio-bwa/"
          },
          {
            "label": "Publication",
            "id": "http://www.ncbi.nlm.nih.gov/pubmed/19451168"
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/bwa-index/15",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1477014219,
        "sbg:job": {
          "inputs": {
            "block_size": 0,
            "bwt_construction": "bwtsw",
            "prefix_of_the_index_to_be_output": "prefix",
            "add_64_to_fasta_name": true,
            "reference": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [
                {
                  "path": ".amb"
                },
                {
                  "path": ".ann"
                },
                {
                  "path": ".bwt"
                },
                {
                  "path": ".pac"
                },
                {
                  "path": ".sa"
                }
              ],
              "path": "/path/to/the/reference.fasta"
            },
            "total_memory": null
          },
          "allocatedResources": {
            "mem": 1536,
            "cpu": 1
          }
        },
        "sbg:toolkitVersion": "0.7.13",
        "inputs": [
          {
            "description": "Total memory [GB] to be reserved for the tool (Default value is 1.5 x size_of_the_reference).",
            "type": [
              "null",
              "int"
            ],
            "id": "#total_memory",
            "label": "Total memory [Gb]",
            "sbg:category": "Configuration"
          },
          {
            "description": "Input reference fasta of TAR file with reference and indices.",
            "label": "Reference",
            "sbg:stageInput": "link",
            "id": "#reference",
            "sbg:fileTypes": "FASTA,FA,FA.GZ,FASTA.GZ,TAR",
            "type": [
              "File"
            ],
            "required": true,
            "sbg:category": "File input"
          },
          {
            "description": "Prefix of the index [same as fasta name].",
            "type": [
              "null",
              "string"
            ],
            "id": "#prefix_of_the_index_to_be_output",
            "label": "Prefix of the index to be output",
            "sbg:category": "Configuration"
          },
          {
            "sbg:toolDefaultValue": "auto",
            "label": "Bwt construction",
            "description": "Algorithm for constructing BWT index. Available options are:s\tIS linear-time algorithm for constructing suffix array. It requires 5.37N memory where N is the size of the database. IS is moderately fast, but does not work with database larger than 2GB. IS is the default algorithm due to its simplicity. The current codes for IS algorithm are reimplemented by Yuta Mori. bwtsw\tAlgorithm implemented in BWT-SW. This method works with the whole human genome. Warning: `-a bwtsw' does not work for short genomes, while `-a is' and `-a div' do not work not for long genomes.",
            "id": "#bwt_construction",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "bwt_construction",
                "symbols": [
                  "bwtsw",
                  "is",
                  "div"
                ]
              }
            ],
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-a"
            },
            "sbg:category": "Configuration"
          },
          {
            "sbg:toolDefaultValue": "10000000",
            "label": "Block size",
            "description": "Block size for the bwtsw algorithm (effective with -a bwtsw).",
            "type": [
              "null",
              "int"
            ],
            "id": "#block_size",
            "sbg:category": "Configuration"
          },
          {
            "description": "Index files named as <in.fasta>64 instead of <in.fasta>.*.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#add_64_to_fasta_name",
            "label": "Output index files renamed by adding 64",
            "sbg:category": "Configuration"
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 313.05730183919275,
        "sbg:id": "Durga/exome-sequencing/bwa-index/0"
      },
      "id": "#BWA_INDEX",
      "inputs": [
        {
          "id": "#BWA_INDEX.total_memory"
        },
        {
          "source": [
            "#reference"
          ],
          "id": "#BWA_INDEX.reference"
        },
        {
          "id": "#BWA_INDEX.prefix_of_the_index_to_be_output"
        },
        {
          "id": "#BWA_INDEX.bwt_construction"
        },
        {
          "id": "#BWA_INDEX.block_size"
        },
        {
          "id": "#BWA_INDEX.add_64_to_fasta_name"
        }
      ],
      "outputs": [
        {
          "id": "#BWA_INDEX.indexed_reference"
        }
      ],
      "sbg:y": 313.05730183919275,
      "sbg:x": 178.66664632161462
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1476974791,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/bwa-mem-bundle-0-7-13/32"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/vladimirk/bwa:0.7.13"
          },
          {
            "value": {
              "script": "{  \n  // Calculate suggested number of CPUs depending of the input reads size\n  if ($job.inputs.input_reads.constructor == Array){\n    if ($job.inputs.input_reads[1]){\n      reads_size = $job.inputs.input_reads[0].size + $job.inputs.input_reads[1].size\n    } else{\n      reads_size = $job.inputs.input_reads[0].size\n    }\n  }\n  else{\n    reads_size = $job.inputs.input_reads.size\n  }\n  if(!reads_size) { reads_size = 0 }\n\n\n  GB_1 = 1024*1024*1024\n  if(reads_size < GB_1){ suggested_cpus = 1 }\n  else if(reads_size < 10 * GB_1){ suggested_cpus = 8 }\n  else { suggested_cpus = 31 }\n  \n  if($job.inputs.reserved_threads){ return $job.inputs.reserved_threads }\n  else if($job.inputs.threads){ return $job.inputs.threads } \n  else if($job.inputs.sambamba_threads) { return $job.inputs.sambamba_threads }\n  else{    return suggested_cpus  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:CPURequirement"
          },
          {
            "value": {
              "script": "{  \n\n  // Calculate suggested number of CPUs depending of the input reads size\n  if ($job.inputs.input_reads.constructor == Array){\n    if ($job.inputs.input_reads[1]){\n      reads_size = $job.inputs.input_reads[0].size + $job.inputs.input_reads[1].size\n    } else{\n      reads_size = $job.inputs.input_reads[0].size\n    }\n  }\n  else{\n    reads_size = $job.inputs.input_reads.size\n  }\n  if(!reads_size) { reads_size = 0 }\n \n  GB_1 = 1024*1024*1024\n  if(reads_size < GB_1){ suggested_memory = 4 }\n  else if(reads_size < 10 * GB_1){ suggested_memory = 15 }\n  else { suggested_memory = 58 }\n  \n  if($job.inputs.total_memory){  \t\n    return  $job.inputs.total_memory* 1024  \n  } \n  else if($job.inputs.sort_memory){\n    return  $job.inputs.sort_memory* 1024\n  }\n  else{  \t\n    return suggested_memory * 1024  \n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "Alignment",
          "FASTQ-Processing"
        ],
        "sbg:project": "Durga/exome-sequencing",
        "id": "Durga/exome-sequencing/bwa-mem-bundle-0-7-13/0",
        "outputs": [
          {
            "description": "Bam index produced by BWA MEM Bundle, if SortedBAM output format is chosen.",
            "label": "Bam index",
            "outputBinding": {
              "glob": "*.bai",
              "sbg:inheritMetadataFrom": "#input_reads",
              "sbg:metadata": {
                "reference_genome": {
                  "script": "{\n  reference_file = $job.inputs.reference_index_tar.path.split('/')[$job.inputs.reference_index_tar.path.split('/').length-1]\n  name = reference_file.slice(0, -4) // cut .tar extension \n  \n  name_list = name.split('.')\n  ext = name_list[name_list.length-1]\n\n  if (ext == 'gz' || ext == 'GZ'){\n    a = name_list.pop() // strip fasta.gz\n    a = name_list.pop()\n  } else\n    a = name_list.pop() //strip only fasta/fa\n  \n  return name_list.join('.')\n  \n}",
                  "class": "Expression",
                  "engine": "#cwl-js-engine"
                }
              }
            },
            "id": "#bam_index",
            "sbg:fileTypes": "BAI",
            "type": [
              "null",
              "File"
            ]
          },
          {
            "description": "Aligned reads.",
            "label": "Aligned SAM/BAM",
            "outputBinding": {
              "secondaryFiles": [
                ".bai",
                "^.bai"
              ],
              "glob": "{*.sam,*.bam}",
              "sbg:inheritMetadataFrom": "#input_reads",
              "sbg:metadata": {
                "reference_genome": {
                  "script": "{\n  reference_file = $job.inputs.reference_index_tar.path.split('/')[$job.inputs.reference_index_tar.path.split('/').length-1]\n  name = reference_file.slice(0, -4) // cut .tar extension \n  \n  name_list = name.split('.')\n  ext = name_list[name_list.length-1]\n\n  if (ext == 'gz' || ext == 'GZ'){\n    a = name_list.pop() // strip fasta.gz\n    a = name_list.pop()\n  } else\n    a = name_list.pop() //strip only fasta/fa\n  \n  return name_list.join('.')\n  \n}",
                  "class": "Expression",
                  "engine": "#cwl-js-engine"
                }
              }
            },
            "id": "#aligned_reads",
            "sbg:fileTypes": "SAM, BAM",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "BWA MEM Bundle",
        "sbg:license": "BWA: GNU Affero General Public License v3.0, MIT License. Sambamba: GNU GENERAL PUBLIC LICENSE. Samblaster: The MIT License (MIT)",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1476974791,
        "description": "**BWA MEM** is an algorithm designed for aligning sequence reads onto a large reference genome. BWA MEM is implemented as a component of BWA. The algorithm can automatically choose between performing end-to-end and local alignments. BWA MEM is capable of outputting multiple alignments, and finding chimeric reads. It can be applied to a wide range of read lengths, from 70 bp to several megabases. \n\nIn order to obtain possibilities for additional fast processing of aligned reads, two tools are embedded together into the same package with BWA MEM (0.7.13): Samblaster. (0.1.22) and Sambamba (v0.6.0). \nIf deduplication of alignments is needed, it can be done by setting the parameter 'Duplication'. **Samblaster** will be used internally to perform this action.\nBesides the standard BWA MEM SAM output file, BWA MEM package has been extended to support two additional output options: a BAM file obtained by piping through **Sambamba view** while filtering out the secondary alignments, as well as a Coordinate Sorted BAM option that additionally pipes the output through **Sambamba sort**, along with an accompanying .bai file produced by **Sambamba sort** as side effect. Parameters responsible for these additional features are 'Filter out secondary alignments' and 'Output format'. Passing data from BWA MEM to Samblaster and Sambamba tools has been done through the pipes which saves processing times of two read and write of aligned reads into the hard drive. \n\nFor input reads fastq files of total size less than 10 GB we suggest using the default setting for parameter 'total memory' of 15GB, for larger files we suggest using 58 GB of memory and 32 CPU cores.\n\n**Important:**\nIn order to work BWA MEM Bundle requires fasta reference file accompanied with **bwa fasta indices** in TAR file.\nThere is the **known issue** with samblaster. It does not support processing when number of sequences in fasta is larger than 32768. If this is the case do not use deduplication option because the output BAM will be corrupted.",
        "stdout": "",
        "arguments": [
          {
            "position": 111,
            "separate": false,
            "valueFrom": {
              "script": "{ \n     ///////////////////////////////////////////\n    ///  SAMBAMBA VIEW   //////////////////////\n   ///////////////////////////////////////////\nfunction common_substring(a,b) {\n  var i = 0;\n  \n  while(a[i] === b[i] && i < a.length)\n  {\n    i = i + 1;\n  }\n\n  return a.slice(0, i);\n}\n  \n   // Set output file name\n  if($job.inputs.input_reads[0] instanceof Array){\n    input_1 = $job.inputs.input_reads[0][0] // scatter mode\n    input_2 = $job.inputs.input_reads[0][1]\n  } else if($job.inputs.input_reads instanceof Array){\n    input_1 = $job.inputs.input_reads[0]\n    input_2 = $job.inputs.input_reads[1]\n  }else {\n    input_1 = [].concat($job.inputs.input_reads)[0]\n    input_2 = input_1\n  }\n  full_name = input_1.path.split('/')[input_1.path.split('/').length-1] \n\n  if($job.inputs.output_name){name = $job.inputs.output_name }\n  else if ($job.inputs.input_reads.length == 1){ \n    name = full_name\n\n    if(name.slice(-3, name.length) === '.gz' || name.slice(-3, name.length) === '.GZ')\n      name = name.slice(0, -3)   \n    if(name.slice(-3, name.length) === '.fq' || name.slice(-3, name.length) === '.FQ')\n      name = name.slice(0, -3)\n    if(name.slice(-6, name.length) === '.fastq' || name.slice(-6, name.length) === '.FASTQ')\n      name = name.slice(0, -6)\n       \n  }else{\n    full_name2 = input_2.path.split('/')[input_2.path.split('/').length-1] \n    name = common_substring(full_name, full_name2)\n    \n    if(name.slice(-1, name.length) === '_' || name.slice(-1, name.length) === '.')\n      name = name.slice(0, -1)\n    if(name.slice(-2, name.length) === 'p_' || name.slice(-1, name.length) === 'p.')\n      name = name.slice(0, -2)\n    if(name.slice(-2, name.length) === 'P_' || name.slice(-1, name.length) === 'P.')\n      name = name.slice(0, -2)\n    if(name.slice(-3, name.length) === '_p_' || name.slice(-3, name.length) === '.p.')\n      name = name.slice(0, -3)\n    if(name.slice(-3, name.length) === '_pe' || name.slice(-3, name.length) === '.pe')\n      name = name.slice(0, -3)\n  }\n  \n  // Read number of threads if defined\n  if ($job.inputs.sambamba_threads){\n    threads = $job.inputs.sambamba_threads\n  }\n  else if ($job.inputs.threads){\n    threads = $job.inputs.threads\n  }\n  else { threads = 8 }\n  \n  if ($job.inputs.filter_out_secondary_alignments){\n    filt_sec = ' --filter \\'not secondary_alignment\\' '\n  }\n  else {filt_sec=' '}\n   \n  // Set output command\n  sambamba_path = '/opt/sambamba_v0.6.0'\n  if ($job.inputs.output_format == 'BAM') {\n    return \"| \" + sambamba_path + \" view -t \"+ threads + filt_sec + \"-f bam -S /dev/stdin -o \"+ name + \".bam\"\n  }\n  else if ($job.inputs.output_format == 'SAM'){ // SAM\n    return \"> \" + name + \".sam\"\n  }\n  else { // SortedBAM is considered default\n    return \"| \" + sambamba_path + \" view -t \"+ threads + filt_sec + \"-f bam -l 0 -S /dev/stdin\"\n  }\n\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "prefix": ""
          },
          {
            "position": 112,
            "separate": false,
            "valueFrom": {
              "script": "{\n  ///////////////////////////////////////////\n ///  SAMBAMBA SORT   //////////////////////\n///////////////////////////////////////////\n  \nfunction common_substring(a,b) {\n  var i = 0;\n  while(a[i] === b[i] && i < a.length)\n  {\n    i = i + 1;\n  }\n\n  return a.slice(0, i);\n}\n\n   // Set output file name\n  if($job.inputs.input_reads[0] instanceof Array){\n    input_1 = $job.inputs.input_reads[0][0] // scatter mode\n    input_2 = $job.inputs.input_reads[0][1]\n  } else if($job.inputs.input_reads instanceof Array){\n    input_1 = $job.inputs.input_reads[0]\n    input_2 = $job.inputs.input_reads[1]\n  }else {\n    input_1 = [].concat($job.inputs.input_reads)[0]\n    input_2 = input_1\n  }\n  full_name = input_1.path.split('/')[input_1.path.split('/').length-1] \n  \n  if($job.inputs.output_name){name = $job.inputs.output_name }\n  else if ($job.inputs.input_reads.length == 1){\n    name = full_name\n    if(name.slice(-3, name.length) === '.gz' || name.slice(-3, name.length) === '.GZ')\n      name = name.slice(0, -3)   \n    if(name.slice(-3, name.length) === '.fq' || name.slice(-3, name.length) === '.FQ')\n      name = name.slice(0, -3)\n    if(name.slice(-6, name.length) === '.fastq' || name.slice(-6, name.length) === '.FASTQ')\n      name = name.slice(0, -6)\n       \n  }else{\n    full_name2 = input_2.path.split('/')[input_2.path.split('/').length-1] \n    name = common_substring(full_name, full_name2)\n    \n    if(name.slice(-1, name.length) === '_' || name.slice(-1, name.length) === '.')\n      name = name.slice(0, -1)\n    if(name.slice(-2, name.length) === 'p_' || name.slice(-1, name.length) === 'p.')\n      name = name.slice(0, -2)\n    if(name.slice(-2, name.length) === 'P_' || name.slice(-1, name.length) === 'P.')\n      name = name.slice(0, -2)\n    if(name.slice(-3, name.length) === '_p_' || name.slice(-3, name.length) === '.p.')\n      name = name.slice(0, -3)\n    if(name.slice(-3, name.length) === '_pe' || name.slice(-3, name.length) === '.pe')\n      name = name.slice(0, -3)\n  }\n\n  //////////////////////////\n  // Set sort memory size\n  \n  reads_size = 0 // Not used because of situations when size does not exist!\n  GB_1 = 1024*1024*1024\n  if(reads_size < GB_1){ \n    suggested_memory = 4\n    suggested_cpus = 1\n  }\n  else if(reads_size < 10 * GB_1){ \n    suggested_memory = 15\n    suggested_cpus = 8\n  }\n  else { \n    suggested_memory = 58 \n    suggested_cpus = 31\n  }\n  \n  \n  if(!$job.inputs.total_memory){ total_memory = suggested_memory }\n  else{ total_memory = $job.inputs.total_memory }\n\n  // TODO:Rough estimation, should be fine-tuned!\n  if(total_memory > 16){ sorter_memory = parseInt(total_memory / 3) }\n  else{ sorter_memory = 5 }\n          \n  if ($job.inputs.sort_memory){\n    sorter_memory_string = $job.inputs.sort_memory +'GiB'\n  }\n  else sorter_memory_string = sorter_memory + 'GiB' \n  \n  // Read number of threads if defined  \n  if ($job.inputs.sambamba_threads){\n    threads = $job.inputs.sambamba_threads\n  }\n  else if ($job.inputs.threads){\n    threads = $job.inputs.threads\n  }\n  else threads = suggested_cpus\n  \n  sambamba_path = '/opt/sambamba_v0.6.0'\n  \n  // SortedBAM is considered default\n  if (!(($job.inputs.output_format == 'BAM') || ($job.inputs.output_format == 'SAM'))){\n    cmd = \"| \" + sambamba_path + \" sort -t \" + threads\n    return cmd + \" -m \"+sorter_memory_string+\" --tmpdir ./ -o \"+ name +\".bam -l 5 /dev/stdin\"\n  }\n  else return \"\"\n}\n  \n",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "position": 110,
            "separate": true,
            "valueFrom": {
              "script": "{\n    ///////////////////////////////////////////\n    ///  SAMBLASTER      //////////////////////\n   ///////////////////////////////////////////\n  if ($job.inputs.deduplication == \"MarkDuplicates\"){\n    return \"| /opt/samblaster/samblaster -i /dev/stdin -o /dev/stdout\"\n  }\n  else if ($job.inputs.deduplication == \"RemoveDuplicates\"){\n    return \"| /opt/samblaster/samblaster -r -i /dev/stdin -o /dev/stdout\"\n  }\n  else{\n   return \"\" \n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "position": 1,
            "separate": true,
            "valueFrom": {
              "script": "{\n  \n  if($job.inputs.read_group_header){\n  \treturn '-R ' + $job.inputs.read_group_header\n  }\n    \n  function add_param(key, val){\n    if(!val){\n      return\n\t}\n    param_list.push(key + ':' + val)\n  }\n\n  param_list = []\n\n  // Set output file name\n  if($job.inputs.input_reads[0] instanceof Array){\n    input_1 = $job.inputs.input_reads[0][0] // scatter mode\n  } else if($job.inputs.input_reads instanceof Array){\n    input_1 = $job.inputs.input_reads[0]\n  }else {\n    input_1 = [].concat($job.inputs.input_reads)[0]\n  }\n  \n  //Read metadata for input reads\n  read_metadata = input_1.metadata\n  if(!read_metadata) read_metadata = []\n\n  add_param('ID', '1')\n  \n  if($job.inputs.rg_data_submitting_center){\n  \tadd_param('CN', $job.inputs.rg_data_submitting_center)\n  }\n  else if('data_submitting_center' in  read_metadata){\n  \tadd_param('CN', read_metadata.data_submitting_center)\n  }\n  \n  if($job.inputs.rg_library_id){\n  \tadd_param('LB', $job.inputs.rg_library_id)\n  }\n  else if('library_id' in read_metadata){\n  \tadd_param('LB', read_metadata.library_id)\n  }\n  \n  if($job.inputs.rg_median_fragment_length){\n  \tadd_param('PI', $job.inputs.rg_median_fragment_length)\n  }\n  \n  if($job.inputs.rg_platform){\n  \tadd_param('PL', $job.inputs.rg_platform)\n  }\n  else if('platform' in read_metadata){\n  \tadd_param('PL', read_metadata.platform)\n  }\n  \n  if($job.inputs.rg_platform_unit_id){\n  \tadd_param('PU', $job.inputs.rg_platform_unit_id)\n  }\n  else if('platform_unit_id' in read_metadata){\n  \tadd_param('PU', read_metadata.platform_unit_id)\n  }\n  \n  if($job.inputs.rg_sample_id){\n  \tadd_param('SM', $job.inputs.rg_sample_id)\n  }\n  else if('sample_id' in  read_metadata){\n  \tadd_param('SM', read_metadata.sample_id)\n  }\n    \n  return \"-R '@RG\\\\t\" + param_list.join('\\\\t') + \"'\"\n  \n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "position": 101,
            "separate": true,
            "valueFrom": {
              "script": "{\n  /////// Set input reads in the correct order depending of the paired end from metadata\n    \n     // Set output file name\n  if($job.inputs.input_reads[0] instanceof Array){\n    input_reads = $job.inputs.input_reads[0] // scatter mode\n  } else {\n    input_reads = $job.inputs.input_reads = [].concat($job.inputs.input_reads)\n  }\n  \n  \n  //Read metadata for input reads\n  read_metadata = input_reads[0].metadata\n  if(!read_metadata) read_metadata = []\n  \n  order = 0 // Consider this as normal order given at input: pe1 pe2\n  \n  // Check if paired end 1 corresponds to the first given read\n  if(read_metadata == []){ order = 0 }\n  else if('paired_end' in  read_metadata){ \n    pe1 = read_metadata.paired_end\n    if(pe1 != 1) order = 1 // change order\n  }\n\n  // Return reads in the correct order\n  if (input_reads.length == 1){\n    return input_reads[0].path // Only one read present\n  }\n  else if (input_reads.length == 2){\n    if (order == 0) return input_reads[0].path + ' ' + input_reads[1].path\n    else return input_reads[1].path + ' ' + input_reads[0].path\n  }\n\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "position": 2,
            "separate": true,
            "valueFrom": {
              "script": "{\n  \n  reads_size = 0 \n\n  GB_1 = 1024*1024*1024\n  if(reads_size < GB_1){ suggested_threads = 1 }\n  else if(reads_size < 10 * GB_1){ suggested_threads = 8 }\n  else { suggested_threads = 31 }\n  \n  \n  if(!$job.inputs.threads){  \treturn suggested_threads  }  \n  else{    return $job.inputs.threads  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "prefix": "-t"
          },
          {
            "position": 10,
            "separate": true,
            "valueFrom": {
              "script": "{\n  reference_file = $job.inputs.reference_index_tar.path.split('/')[$job.inputs.reference_index_tar.path.split('/').length-1]\n  name = reference_file.slice(0, -4) // cut .tar extension \n  \n  return name\n  \n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/bwa-mem-bundle-0-7-13/32",
        "sbg:cmdPreview": "tar -xf reference.b37.fasta.gz.tar ;  /opt/bwa-0.7.13/bwa mem  -R '@RG\\tID:1\\tPL:Illumina\\tSM:dnk_sample' -t 1  reference.b37.fasta.gz  /path/to/LP6005524-DNA_C01_lane_7.sorted.converted.filtered.pe_2.gz /path/to/LP6005524-DNA_C01_lane_7.sorted.converted.filtered.pe_1.gz  | /opt/samblaster/samblaster -i /dev/stdin -o /dev/stdout | /opt/sambamba_v0.6.0 view -t 8 -f bam -l 0 -S /dev/stdin | /opt/sambamba_v0.6.0 sort -t 1 -m 5GiB --tmpdir ./ -o LP6005524-DNA_C01_lane_7.sorted.converted.filtered.bam -l 5 /dev/stdin",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 343.9524189858225,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Heng Li",
        "sbg:revision": 0,
        "stdin": "",
        "sbg:update": "admin/sbg-public-data/bwa-mem-bundle-0-7-13/33",
        "sbg:updateModifiedBy": "admin",
        "sbg:toolkit": "BWA",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://bio-bwa.sourceforge.net/"
          },
          {
            "label": "Source code",
            "id": "https://github.com/lh3/bwa"
          },
          {
            "label": "Wiki",
            "id": "http://bio-bwa.sourceforge.net/bwa.shtml"
          },
          {
            "label": "Download",
            "id": "http://sourceforge.net/projects/bio-bwa/"
          },
          {
            "label": "Publication",
            "id": "http://arxiv.org/abs/1303.3997"
          },
          {
            "label": "Publication BWA Algorithm",
            "id": "http://www.ncbi.nlm.nih.gov/pubmed/19451168"
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/bwa-mem-bundle-0-7-13/32",
        "successCodes": [],
        "sbg:modifiedOn": 1476974791,
        "sbg:image_url": null,
        "y": 392.69861782706636,
        "sbg:job": {
          "inputs": {
            "read_group_header": "",
            "filter_out_secondary_alignments": false,
            "rg_data_submitting_center": "",
            "deduplication": "MarkDuplicates",
            "reference_index_tar": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [
                {
                  "path": ".amb"
                },
                {
                  "path": ".ann"
                },
                {
                  "path": ".bwt"
                },
                {
                  "path": ".pac"
                },
                {
                  "path": ".sa"
                }
              ],
              "path": "/path/to/reference.b37.fasta.gz.tar"
            },
            "rg_library_id": "",
            "rg_platform_unit_id": "",
            "rg_platform": "Illumina",
            "threads": null,
            "total_memory": null,
            "rg_median_fragment_length": "",
            "output_format": null,
            "output_name": "",
            "rg_sample_id": "",
            "sort_memory": 0,
            "sambamba_threads": null,
            "reserved_threads": 3,
            "band_width": null,
            "skip_seeds": null,
            "input_reads": [
              {
                "size": 30000000000,
                "class": "File",
                "metadata": {
                  "sample_id": "dnk_sample",
                  "paired_end": "2"
                },
                "secondaryFiles": [],
                "path": "/path/to/LP6005524-DNA_C01_lane_7.sorted.converted.filtered.pe_1.gz"
              },
              {
                "path": "/path/to/LP6005524-DNA_C01_lane_7.sorted.converted.filtered.pe_2.gz"
              }
            ]
          },
          "allocatedResources": {
            "mem": 4096,
            "cpu": 1
          }
        },
        "appUrl": "/u/Durga/exome-sequencing/apps/#Durga/exome-sequencing/bwa-mem-bundle-0-7-13/0",
        "sbg:toolkitVersion": "0.7.13",
        "inputs": [
          {
            "sbg:toolDefaultValue": "3",
            "label": "Verbose level",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-v"
            },
            "type": [
              "null",
              {
                "type": "enum",
                "name": "verbose_level",
                "symbols": [
                  "1",
                  "2",
                  "3",
                  "4"
                ]
              }
            ],
            "id": "#verbose_level",
            "description": "Verbose level: 1=error, 2=warning, 3=message, 4+=debugging.",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-Y"
            },
            "label": "Use soft clipping",
            "description": "Use soft clipping for supplementary alignments.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#use_soft_clipping",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "17",
            "label": "Unpaired read penalty",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-U"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#unpaired_read_penalty",
            "description": "Penalty for an unpaired read pair.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "15",
            "label": "Total memory",
            "sbg:stageInput": null,
            "id": "#total_memory",
            "type": [
              "null",
              "int"
            ],
            "description": "Total memory to be used by the tool in GB. It's sum of BWA, Sambamba Sort and Samblaster. For fastq files of total size less than 10GB, we suggest using the default setting of 15GB, for larger files we suggest using 58GB of memory (and 32CPU cores).",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "sbg:toolDefaultValue": "8",
            "label": "Threads",
            "id": "#threads",
            "type": [
              "null",
              "int"
            ],
            "description": "Number of threads for BWA, Samblaster and Sambamba sort process.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "inputBinding": {
              "separate": false,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "-I"
            },
            "label": "Specify distribution parameters",
            "description": "Specify the mean, standard deviation (10% of the mean if absent), max (4 sigma from the mean if absent) and min of the insert size distribution.FR orientation only. This array can have maximum four values, where first two should be specified as FLOAT and last two as INT.",
            "type": [
              "null",
              {
                "type": "array",
                "name": "speficy_distribution_parameters",
                "items": "float"
              }
            ],
            "id": "#speficy_distribution_parameters",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "description": "Amount of RAM [Gb] to give to the sorting algorithm (if not provided will be set to one third of the total memory).",
            "label": "Memory for BAM sorting",
            "id": "#sort_memory",
            "type": [
              "null",
              "int"
            ],
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-p"
            },
            "label": "Smart pairing in input FASTQ file",
            "description": "Smart pairing in input FASTQ file (ignoring in2.fq).",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#smart_pairing_in_input_fastq",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "500",
            "label": "Skip seeds with more than INT occurrences",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-c"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#skip_seeds",
            "description": "Skip seeds with more than INT occurrences.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-P"
            },
            "label": "Skip pairing",
            "description": "Skip pairing; mate rescue performed unless -S also in use.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#skip_pairing",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-S"
            },
            "label": "Skip mate rescue",
            "description": "Skip mate rescue.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#skip_mate_rescue",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "1.5",
            "label": "Select seeds",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-r"
            },
            "type": [
              "null",
              "float"
            ],
            "id": "#select_seeds",
            "description": "Look for internal seeds inside a seed longer than {-k} * FLOAT.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "20",
            "label": "Seed occurrence for the 3rd round",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-y"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#seed_occurrence_for_the_3rd_round",
            "description": "Seed occurrence for the 3rd round seeding.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "1",
            "label": "Score for a sequence match",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-A"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#score_for_a_sequence_match",
            "description": "Score for a sequence match, which scales options -TdBOELU unless overridden.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "description": "Number of threads to pass to Sambamba sort, if used.",
            "label": "Sambamba Sort threads",
            "id": "#sambamba_threads",
            "type": [
              "null",
              "int"
            ],
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "sbg:toolDefaultValue": "Inferred from metadata",
            "label": "Sample ID",
            "id": "#rg_sample_id",
            "type": [
              "null",
              "string"
            ],
            "description": "Specify the sample ID for RG line - A human readable identifier for a sample or specimen, which could contain some metadata information. A sample or specimen is material taken from a biological entity for testing, diagnosis, propagation, treatment, or research purposes, including but not limited to tissues, body fluids, cells, organs, embryos, body excretory products, etc.",
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "sbg:toolDefaultValue": "Inferred from metadata",
            "label": "Platform unit ID",
            "id": "#rg_platform_unit_id",
            "type": [
              "null",
              "string"
            ],
            "description": "Specify the platform unit (lane/slide) for RG line - An identifier for lanes (Illumina), or for slides (SOLiD) in the case that a library was split and ran over multiple lanes on the flow cell or slides.",
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "sbg:toolDefaultValue": "Inferred from metadata",
            "label": "Platform",
            "id": "#rg_platform",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "rg_platform",
                "symbols": [
                  "454",
                  "Helicos",
                  "Illumina",
                  "Solid",
                  "IonTorrent"
                ]
              }
            ],
            "description": "Specify the version of the technology that was used for sequencing, which will be placed in RG line.",
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "description": "Specify the median fragment length for RG line.",
            "label": "Median fragment length",
            "id": "#rg_median_fragment_length",
            "type": [
              "null",
              "string"
            ],
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "sbg:toolDefaultValue": "Inferred from metadata",
            "label": "Library ID",
            "id": "#rg_library_id",
            "type": [
              "null",
              "string"
            ],
            "description": "Specify the identifier for the sequencing library preparation, which will be placed in RG line.",
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "description": "Specify the data submitting center for RG line.",
            "label": "Data submitting center",
            "id": "#rg_data_submitting_center",
            "type": [
              "null",
              "string"
            ],
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "sbg:toolDefaultValue": "1",
            "label": "Reserved number of threads on the instance",
            "sbg:stageInput": null,
            "id": "#reserved_threads",
            "type": [
              "null",
              "int"
            ],
            "description": "Reserved number of threads on the instance used by scheduler.",
            "required": false,
            "sbg:category": "Configuration"
          },
          {
            "description": "Reference fasta file with BWA index files packed in TAR.",
            "label": "Reference Index TAR",
            "sbg:stageInput": "link",
            "id": "#reference_index_tar",
            "sbg:fileTypes": "TAR",
            "type": [
              "File"
            ],
            "required": true,
            "sbg:category": "Input files"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-x"
            },
            "label": "Sequencing technology-specific settings",
            "description": "Sequencing technology-specific settings; Setting -x changes multiple parameters unless overriden. pacbio: -k17 -W40 -r10 -A1 -B1 -O1 -E1 -L0  (PacBio reads to ref). ont2d: -k14 -W20 -r10 -A1 -B1 -O1 -E1 -L0  (Oxford Nanopore 2D-reads to ref). intractg: -B9 -O16 -L5  (intra-species contigs to ref).",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "read_type",
                "symbols": [
                  "pacbio",
                  "ont2d",
                  "intractg"
                ]
              }
            ],
            "id": "#read_type",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "Constructed from per-attribute parameters or inferred from metadata.",
            "label": "Read group header",
            "sbg:includeInPorts": true,
            "id": "#read_group_header",
            "type": [
              "null",
              "string"
            ],
            "description": "Read group header line such as '@RG\\tID:foo\\tSM:bar'.  This value takes precedence over per-attribute parameters.",
            "required": false,
            "sbg:category": "BWA Read Group Options"
          },
          {
            "description": "Name of the output BAM file.",
            "label": "Output SAM/BAM file name",
            "id": "#output_name",
            "type": [
              "null",
              "string"
            ],
            "required": false,
            "sbg:category": "Configuration"
          },
          {
            "sbg:toolDefaultValue": "[5, 200]",
            "label": "Output in XA",
            "inputBinding": {
              "separate": false,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "-h"
            },
            "type": [
              "null",
              {
                "type": "array",
                "items": "int"
              }
            ],
            "id": "#output_in_xa",
            "description": "If there are <INT hits with score >80% of the max score, output all in XA. This array should have no more than two values.",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-V"
            },
            "label": "Output header",
            "description": "Output the reference FASTA header in the XR tag.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#output_header",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "SortedBAM",
            "label": "Output format",
            "id": "#output_format",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "output_format",
                "symbols": [
                  "SAM",
                  "BAM",
                  "SortedBAM"
                ]
              }
            ],
            "description": "Specify output format (Sorted BAM option will output coordinate sorted BAM).",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-a"
            },
            "label": "Output alignments",
            "description": "Output all alignments for SE or unpaired PE.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#output_alignments",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "4",
            "label": "Mismatch penalty",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-B"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#mismatch_penalty",
            "description": "Penalty for a mismatch.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "19",
            "label": "Minimum seed length",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-k"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#minimum_seed_length",
            "description": "Minimum seed length for BWA MEM.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "30",
            "label": "Minimum alignment score for a read to be output in SAM/BAM",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-T"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#minimum_output_score",
            "description": "Minimum alignment score for a read to be output in SAM/BAM.",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "50",
            "label": "Mate rescue rounds",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-m"
            },
            "type": [
              "null",
              "string"
            ],
            "id": "#mate_rescue_rounds",
            "description": "Perform at most INT rounds of mate rescues for each read.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-M"
            },
            "label": "Mark shorter",
            "description": "Mark shorter split hits as secondary.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#mark_shorter",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-H"
            },
            "label": "Insert string to output SAM or BAM header",
            "description": "Insert STR to header if it starts with @; or insert lines in FILE.",
            "type": [
              "null",
              "string"
            ],
            "id": "#insert_string_to_header",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "description": "Input sequence reads.",
            "label": "Input reads",
            "id": "#input_reads",
            "sbg:fileTypes": "FASTQ, FASTQ.GZ, FQ, FQ.GZ",
            "type": [
              {
                "type": "array",
                "name": "input_reads",
                "items": "File"
              }
            ],
            "required": true,
            "sbg:category": "Input files"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-j"
            },
            "label": "Ignore ALT file",
            "description": "Treat ALT contigs as part of the primary assembly (i.e. ignore <idxbase>.alt file).",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#ignore_alt_file",
            "required": false,
            "sbg:category": "BWA Input/output options"
          },
          {
            "sbg:toolDefaultValue": "[6,6]",
            "label": "Gap open penalties",
            "inputBinding": {
              "separate": false,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "-O"
            },
            "type": [
              "null",
              {
                "type": "array",
                "items": "int"
              }
            ],
            "id": "#gap_open_penalties",
            "description": "Gap open penalties for deletions and insertions. This array can't have more than two values.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "[1,1]",
            "label": "Gap extension",
            "inputBinding": {
              "separate": false,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "-E"
            },
            "type": [
              "null",
              {
                "type": "array",
                "items": "int"
              }
            ],
            "id": "#gap_extension_penalties",
            "description": "Gap extension penalty; a gap of size k cost '{-O} + {-E}*k'. This array can't have more than two values.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "False",
            "label": "Filter out secondary alignments",
            "sbg:stageInput": null,
            "id": "#filter_out_secondary_alignments",
            "type": [
              "null",
              "boolean"
            ],
            "description": "Filter out secondary alignments. Sambamba view tool will be used to perform this internally.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "sbg:toolDefaultValue": "100",
            "label": "Dropoff",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-d"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#dropoff",
            "description": "Off-diagonal X-dropoff.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "0.50",
            "label": "Drop chains fraction",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-D"
            },
            "type": [
              "null",
              "float"
            ],
            "id": "#drop_chains_fraction",
            "description": "Drop chains shorter than FLOAT fraction of the longest overlapping chain.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-e"
            },
            "label": "Discard exact matches",
            "description": "Discard full-length exact matches.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#discard_exact_matches",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "0",
            "label": "Discard chain length",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-W"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#discard_chain_length",
            "description": "Discard a chain if seeded bases shorter than INT.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "sbg:toolDefaultValue": "MarkDuplicates",
            "label": "PCR duplicate detection",
            "id": "#deduplication",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "deduplication",
                "symbols": [
                  "None",
                  "MarkDuplicates",
                  "RemoveDuplicates"
                ]
              }
            ],
            "description": "Use Samblaster for finding duplicates on sequence reads.",
            "required": false,
            "sbg:category": "Samblaster parameters"
          },
          {
            "sbg:toolDefaultValue": "[5,5]",
            "label": "Clipping penalty",
            "inputBinding": {
              "separate": false,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "-L"
            },
            "type": [
              "null",
              {
                "type": "array",
                "items": "int"
              }
            ],
            "id": "#clipping_penalty",
            "description": "Penalty for 5'- and 3'-end clipping.",
            "required": false,
            "sbg:category": "BWA Scoring options"
          },
          {
            "sbg:toolDefaultValue": "100",
            "label": "Band width",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-w"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#band_width",
            "description": "Band width for banded alignment.",
            "required": false,
            "sbg:category": "BWA Algorithm options"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-C"
            },
            "label": "Append comment",
            "description": "Append FASTA/FASTQ comment to SAM output.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#append_comment",
            "required": false,
            "sbg:category": "BWA Input/output options"
          }
        ],
        "class": "CommandLineTool",
        "baseCommand": [
          {
            "script": "{\n  reference_file = $job.inputs.reference_index_tar.path.split('/')[$job.inputs.reference_index_tar.path.split('/').length-1]\n  return 'tar -xf ' + reference_file + ' ; '\n  \n}",
            "class": "Expression",
            "engine": "#cwl-js-engine"
          },
          "/opt/bwa-0.7.13/bwa",
          "mem"
        ],
        "sbg:updateRevisionNotes": "added piping command status check",
        "sbg:id": "Durga/exome-sequencing/bwa-mem-bundle-0-7-13/0"
      },
      "id": "#BWA_MEM_Bundle",
      "inputs": [
        {
          "id": "#BWA_MEM_Bundle.verbose_level"
        },
        {
          "id": "#BWA_MEM_Bundle.use_soft_clipping"
        },
        {
          "id": "#BWA_MEM_Bundle.unpaired_read_penalty"
        },
        {
          "id": "#BWA_MEM_Bundle.total_memory"
        },
        {
          "id": "#BWA_MEM_Bundle.threads"
        },
        {
          "id": "#BWA_MEM_Bundle.speficy_distribution_parameters"
        },
        {
          "id": "#BWA_MEM_Bundle.sort_memory"
        },
        {
          "id": "#BWA_MEM_Bundle.smart_pairing_in_input_fastq"
        },
        {
          "id": "#BWA_MEM_Bundle.skip_seeds"
        },
        {
          "id": "#BWA_MEM_Bundle.skip_pairing"
        },
        {
          "id": "#BWA_MEM_Bundle.skip_mate_rescue"
        },
        {
          "id": "#BWA_MEM_Bundle.select_seeds"
        },
        {
          "id": "#BWA_MEM_Bundle.seed_occurrence_for_the_3rd_round"
        },
        {
          "id": "#BWA_MEM_Bundle.score_for_a_sequence_match"
        },
        {
          "id": "#BWA_MEM_Bundle.sambamba_threads"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_sample_id"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_platform_unit_id"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_platform"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_median_fragment_length"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_library_id"
        },
        {
          "id": "#BWA_MEM_Bundle.rg_data_submitting_center"
        },
        {
          "id": "#BWA_MEM_Bundle.reserved_threads"
        },
        {
          "source": [
            "#BWA_INDEX.indexed_reference"
          ],
          "id": "#BWA_MEM_Bundle.reference_index_tar"
        },
        {
          "id": "#BWA_MEM_Bundle.read_type"
        },
        {
          "id": "#BWA_MEM_Bundle.read_group_header"
        },
        {
          "id": "#BWA_MEM_Bundle.output_name"
        },
        {
          "id": "#BWA_MEM_Bundle.output_in_xa"
        },
        {
          "default": true,
          "id": "#BWA_MEM_Bundle.output_header"
        },
        {
          "default": "SortedBAM",
          "id": "#BWA_MEM_Bundle.output_format"
        },
        {
          "id": "#BWA_MEM_Bundle.output_alignments"
        },
        {
          "id": "#BWA_MEM_Bundle.mismatch_penalty"
        },
        {
          "id": "#BWA_MEM_Bundle.minimum_seed_length"
        },
        {
          "id": "#BWA_MEM_Bundle.minimum_output_score"
        },
        {
          "id": "#BWA_MEM_Bundle.mate_rescue_rounds"
        },
        {
          "id": "#BWA_MEM_Bundle.mark_shorter"
        },
        {
          "id": "#BWA_MEM_Bundle.insert_string_to_header"
        },
        {
          "source": [
            "#SBG_Pair_FASTQs_by_Metadata.tuple_list"
          ],
          "id": "#BWA_MEM_Bundle.input_reads"
        },
        {
          "id": "#BWA_MEM_Bundle.ignore_alt_file"
        },
        {
          "id": "#BWA_MEM_Bundle.gap_open_penalties"
        },
        {
          "id": "#BWA_MEM_Bundle.gap_extension_penalties"
        },
        {
          "id": "#BWA_MEM_Bundle.filter_out_secondary_alignments"
        },
        {
          "id": "#BWA_MEM_Bundle.dropoff"
        },
        {
          "id": "#BWA_MEM_Bundle.drop_chains_fraction"
        },
        {
          "id": "#BWA_MEM_Bundle.discard_exact_matches"
        },
        {
          "id": "#BWA_MEM_Bundle.discard_chain_length"
        },
        {
          "default": "MarkDuplicates",
          "id": "#BWA_MEM_Bundle.deduplication"
        },
        {
          "id": "#BWA_MEM_Bundle.clipping_penalty"
        },
        {
          "id": "#BWA_MEM_Bundle.band_width"
        },
        {
          "default": true,
          "id": "#BWA_MEM_Bundle.append_comment"
        }
      ],
      "outputs": [
        {
          "id": "#BWA_MEM_Bundle.bam_index"
        },
        {
          "id": "#BWA_MEM_Bundle.aligned_reads"
        }
      ],
      "sbg:y": 392.69861782706636,
      "scatter": "#BWA_MEM_Bundle.input_reads",
      "sbg:x": 343.9524189858225
    },
    {
      "run": {
        "sbg:latestRevision": 0,
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1454685368,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": null
          }
        ],
        "temporaryFailCodes": [],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "FASTQ-Processing",
          "Quality-Control",
          "Quantification"
        ],
        "sbg:project": "Durga/test1-tumor-normal",
        "id": "Durga/test1-tumor-normal/fastqc-0-11-4/0",
        "outputs": [
          {
            "description": "Zip archive of the report",
            "label": "Report zip",
            "outputBinding": {
              "glob": "*_fastqc.zip",
              "sbg:inheritMetadataFrom": "#input_fastq",
              "sbg:metadata": {
                "__inherit__": "input_fastq"
              }
            },
            "id": "#report_zip",
            "sbg:fileTypes": "ZIP",
            "type": [
              "null",
              "File"
            ]
          },
          {
            "description": "HTML file containing report.",
            "label": "Report",
            "outputBinding": {
              "glob": "*_fastqc.html",
              "sbg:inheritMetadataFrom": "#input_fastq",
              "sbg:metadata": {
                "__inherit__": "input_fastq"
              }
            },
            "id": "#report_html",
            "sbg:fileTypes": "HTML",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "FastQC",
        "sbg:license": "GNU General Public License v3.0 only",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1454685368,
        "description": "FastQC reads a set of sequence files and produces a quality control (QC) report from each one. These reports consist of a number of different modules, each of which will help identify a different type of potential problem in your data.\n\nFastQC is a tool which takes a FastQ file and runs a series of tests on it to generate a comprehensive QC report.  This report will tell you if there is anything unusual about your sequence.  Each test is flagged as a pass, warning, or fail depending on how far it departs from what you would expect from a normal large dataset with no significant biases.  It is important to stress that warnings or even failures do not necessarily mean that there is a problem with your data, only that it is unusual.  It is possible that the biological nature of your sample means that you would expect this particular bias in your results.",
        "stdout": "",
        "arguments": [
          {
            "separate": true,
            "valueFrom": "--noextract",
            "prefix": ""
          },
          {
            "separate": true,
            "valueFrom": ".",
            "prefix": "--outdir"
          },
          {
            "separate": true,
            "valueFrom": "--quiet",
            "prefix": ""
          },
          {
            "separate": true,
            "valueFrom": "4",
            "prefix": "--threads"
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/fastqc-0-11-4/0",
        "sbg:cmdPreview": "fastqc  --noextract --outdir .  --quiet --threads 4  /root/dir/example.fastq /root/dir/example.fastq",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 277.1428680419923,
        "requirements": [],
        "sbg:toolAuthor": "Babraham Institute",
        "sbg:revision": 0,
        "stdin": "",
        "sbg:update": "admin/sbg-public-data/fastqc-0-11-4/5",
        "sbg:updateModifiedBy": "admin",
        "sbg:toolkit": "FastQC",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://www.bioinformatics.babraham.ac.uk/projects/fastqc/"
          },
          {
            "label": "Source Code",
            "id": "http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.4_source.zip"
          },
          {
            "label": "Wiki",
            "id": "https://wiki.hpcc.msu.edu/display/Bioinfo/FastQC+Tutorial"
          },
          {
            "label": "Download",
            "id": "http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.4.zip"
          },
          {
            "label": "Publication",
            "id": ""
          }
        ],
        "hints": [
          {
            "dockerImageId": "759c4c8fbafd",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/mladenlsbg/fastqc:0.11.4"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 2048,
            "class": "sbg:MemRequirement"
          }
        ],
        "successCodes": [],
        "sbg:modifiedOn": 1454685368,
        "sbg:image_url": null,
        "y": 595.4185866329606,
        "sbg:job": {
          "inputs": {
            "input_fastq": {
              "path": "/root/dir/example.fastq"
            }
          },
          "allocatedResources": {
            "mem": 2048,
            "cpu": 1
          }
        },
        "appUrl": "/u/Durga/test1-tumor-normal/apps/#Durga/test1-tumor-normal/fastqc-0-11-4/0",
        "sbg:toolkitVersion": "0.11.4",
        "inputs": [
          {
            "inputBinding": {
              "separate": false,
              "sbg:cmdInclude": true,
              "prefix": "--nogroup"
            },
            "label": "Nogroup",
            "description": "Disable grouping of bases for reads >50bp. All reports will show data for every base in the read.  WARNING: Using this option will cause fastqc to crash and burn if you use it on really long reads, and your plots may end up a ridiculous size. You have been warned!",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#nogroup",
            "required": false,
            "sbg:category": ""
          },
          {
            "inputBinding": {
              "separate": false,
              "sbg:cmdInclude": true,
              "prefix": "--nano"
            },
            "label": "Nano",
            "description": "Files come from naopore sequences and are in fast5 format. In this mode you can pass in directories to process and the program will take in all fast5 files within those directories and produce a single output file from the sequences found in all files.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#nano",
            "required": false,
            "sbg:category": ""
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--limits"
            },
            "label": "Limits",
            "description": "Specifies a non-default file which contains a set of criteria which will be used to determine the warn/error limits for the various modules.  This file can also be used to selectively remove some modules from the output all together.  The format needs to mirror the default limits.txt file found in the Configuration folder.",
            "id": "#limits_file",
            "sbg:altPrefix": "-l",
            "sbg:category": "",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "7",
            "label": "Kmers",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--kmers"
            },
            "sbg:altPrefix": "-f",
            "id": "#kmers",
            "description": "Specifies the length of Kmer to look for in the Kmer content module. Specified Kmer length must be between 2 and 10. Default length is 7 if not specified.",
            "required": false,
            "sbg:category": ""
          },
          {
            "inputBinding": {
              "position": 100,
              "separate": true,
              "sbg:cmdInclude": true
            },
            "label": "Input file",
            "description": "Input file.",
            "type": [
              "File"
            ],
            "id": "#input_fastq",
            "required": true,
            "sbg:category": ""
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--format"
            },
            "label": "Format",
            "description": "Bypasses the normal sequence file format detection and forces the program to use the specified format.  Valid formats are BAM, SAM, BAM_mapped, SAM_mapped and FASTQ.",
            "id": "#format",
            "sbg:altPrefix": "-f",
            "sbg:category": "",
            "type": [
              "null",
              {
                "type": "enum",
                "name": "format",
                "symbols": [
                  "bam",
                  "sam",
                  "bam_mapped",
                  "sam_mapped",
                  "fastq"
                ]
              }
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--contaminants"
            },
            "label": "Contaminants",
            "description": "Specifies a non-default file which contains the list of contaminants to screen overrepresented sequences against. The file must contain sets of named contaminants in the form name[tab]sequence.  Lines prefixed with a hash will be ignored.",
            "id": "#contaminants_file",
            "sbg:altPrefix": "-c",
            "sbg:category": "",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": false,
              "sbg:cmdInclude": true,
              "prefix": "--casava"
            },
            "label": "Casava",
            "description": "Files come from raw casava output. Files in the same sample group (differing only by the group number) will be analysed as a set rather than individually. Sequences with the filter flag set in the header will be excluded from the analysis. Files must have the same names given to them by casava (including being gzipped and ending with .gz) otherwise they won't be grouped together correctly.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#casava",
            "required": false,
            "sbg:category": ""
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--adapters"
            },
            "label": "Adapters",
            "description": "Specifies a non-default file which contains the list of adapter sequences which will be explicity searched against the library. The file must contain sets of named adapters in the form name[tab]sequence.  Lines prefixed with a hash will be ignored.",
            "id": "#adapters_file",
            "sbg:altPrefix": "-a",
            "sbg:category": "",
            "type": [
              "null",
              "File"
            ],
            "required": false
          }
        ],
        "class": "CommandLineTool",
        "baseCommand": [
          "fastqc"
        ],
        "sbg:updateRevisionNotes": "FASTQ input changed from single file to array. Added better thread handling.\n\nIMPORTANT NOTICE: If updating this tool in existing workflow, it's necessary to REMOVE SCATTER (uncheck it) from input_fastq or it might break the pipeline.",
        "sbg:id": "Durga/test1-tumor-normal/fastqc-0-11-4/0"
      },
      "id": "#FastQC",
      "inputs": [
        {
          "id": "#FastQC.nogroup"
        },
        {
          "id": "#FastQC.nano"
        },
        {
          "id": "#FastQC.limits_file"
        },
        {
          "id": "#FastQC.kmers"
        },
        {
          "source": [
            "#fastq_list"
          ],
          "id": "#FastQC.input_fastq"
        },
        {
          "id": "#FastQC.format"
        },
        {
          "id": "#FastQC.contaminants_file"
        },
        {
          "id": "#FastQC.casava"
        },
        {
          "id": "#FastQC.adapters_file"
        }
      ],
      "outputs": [
        {
          "id": "#FastQC.report_zip"
        },
        {
          "id": "#FastQC.report_html"
        }
      ],
      "sbg:y": 595.4185866329606,
      "scatter": "#FastQC.input_fastq",
      "sbg:x": 277.1428680419923
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1447846727,
            "sbg:revision": 0,
            "sbg:modifiedBy": "djordje_klisic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1449055249,
            "sbg:revision": 1,
            "sbg:modifiedBy": "djordje_klisic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1463578054,
            "sbg:revision": 2,
            "sbg:modifiedBy": "djordje_klisic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1471952983,
            "sbg:revision": 3,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "Link fastq_list"
          },
          {
            "sbg:modifiedOn": 1472135979,
            "sbg:revision": 4,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "Added support for single file."
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "d41a0837ab81",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/djordje_klisic/sbg-pair-fastqs-by-metadata:1.0"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 1024,
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "admin",
        "sbg:categories": [
          "Converters",
          "Other"
        ],
        "sbg:project": "admin/sbg-public-data",
        "id": "admin/sbg-public-data/sbg-pair-fastqs-by-metadata/4",
        "outputs": [
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": "File"
              }
            ],
            "id": "#tuple_list"
          }
        ],
        "sbg:license": "Apache License 2.0",
        "sbg:contributors": [
          "djordje_klisic",
          "admin"
        ],
        "sbg:createdOn": 1447846727,
        "description": "Tool accepts list of FASTQ files for one sample as the input and groups them into pairs  (two files for each paired end). This grouping is done using metadata values that are creating unique combination for each pair or of FASTQ files. Metadata that fields that are uniquely defining one FASTQ pair are Sample ID, Library ID, Platform unit ID and File segment number. Listed order of metadata fields is also representing their hierarchy in the metadata structure. Not all of these four metadata fields are required, but the present set has to be sufficient to create unique combinations for each pair of FASTQ files.",
        "stdout": "",
        "arguments": [
          {
            "position": 1,
            "separate": true,
            "valueFrom": "job.json",
            "prefix": "--in_metafile"
          },
          {
            "position": 2,
            "separate": true,
            "valueFrom": "cwl.output.json",
            "prefix": "--out_metafile"
          }
        ],
        "sbg:cmdPreview": "python pair_fastqs_by_metadata.py --fastq_list /asda/dsa/sda/sda/fasta1.fastq,/asda/dsa/sda/sda/fasta2.fastq,/asda/dsa/sda/sda/fasta3.fastq,/asda/dsa/sda/sda/fasta4.fastq --in_metafile job.json --out_metafile cwl.output.json",
        "sbg:createdBy": "djordje_klisic",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 68.57145622798534,
        "requirements": [
          {
            "class": "CreateFileRequirement",
            "fileDef": [
              {
                "filename": "pair_fastqs_by_metadata.py",
                "fileContent": "import functools\nimport json\nimport itertools\nimport docopt\nimport types\nUSAGE = \"\"\"\n    Usage:\n    \tsbg_pair_fastqs_by_metadata.py --fastq_list FILE... --in_metafile FILE --out_metafile FILE [options]\n\n    Description:\n        Tool accepts list of FATSQ files for one sample as the input and groups them into pairs\n        (two files for each paired end). This grouping is done using metadata values that are creating\n        unique combination for each pair or of FASTQ files. Metadata that fields that are uniquely defining\n        one FASTQ pair are Sample ID, Library ID, Platform Unit ID and File Segment Number. Listed order of metadata fields is also\n        representing their hierarchy in the metadata structure. Not all of these four metadata fields are required,\n        but the present set has to be sufficient to create unique combinations for each pair of FASTQ files.\n\n    Options:\n\n        --help                                Show help dialog.\n\n        --version                             Tool version.\n\n        --fatsq_list FILE...                  List of the FASTQ files with properly set metadata fileds.\n\n        --in_metafile FILE                    File from which necessary metadata information will be extracted.\n                                              Expected value for the SBG platfrom is job.json. [Default: job.json]\n\n        --out_metafile FILE                   File into which necessary file structure is going to be written.\n                                              Expected value for the SBG platform is cwl.output.json.\n                                              [Default: cwl.output.json]\n\n\n\"\"\"\n\ndef make_rg_id(metadata_key, input1):\n\n    input_meta = input1.values()[0]\n\n    S = '__!__'\n    rg = list()\n    for key in ['sample_group', 'sample_id', 'library_id', 'platform_unit_id']:\n        if key in input_meta:\n            rg.append(input_meta[key])\n        else:\n            rg.append('')\n    if 'file_segment_number' in input_meta and input_meta['file_segment_number'] is not None:\n        rg.append(str(input_meta['file_segment_number']))\n    else:\n        rg.append('')\n\n    rg_map = {\n        'sample_id': rg[:2],\n        'library_id': rg[:3],\n        'platform_unit_id': rg[:4],\n        'file_segment_number': rg[:5],\n    }\n\n    return S.join(rg_map[metadata_key]) if metadata_key in rg_map else getattr(input_meta, metadata_key)\n\n\ndef group_inputs(inp):\n\n    metadata_key = 'file_segment_number'\n    if str(metadata_key) == 'None':\n        return {'': [f for f in inp]}\n    if metadata_key == 'file':\n        return {f: [f] for f in inp}\n    key_getter = functools.partial(make_rg_id, metadata_key)\n    print inp\n    files = sorted([x for x in inp], key=key_getter)\n    tuple_list_temp = [[f for f in val] for key, val in itertools.groupby(files, key_getter)]\n    tuple_list=list()\n    for elem in tuple_list_temp:\n        for key in elem[0].keys():\n            if len(files) != 1:\n                if elem[0][key]['paired_end'] == \"2\":\n                    tuple_list.append([str(elem[1].keys()[0]), str(elem[0].keys()[0])])\n                else:\n                    tuple_list.append([str(elem[0].keys()[0]), str(elem[1].keys()[0])])\n            else:\n                    tuple_list.append([str(elem[0].keys()[0])])\n\n    print tuple_list\n    return tuple_list\n\ndef main():\n\n    args = docopt.docopt(USAGE, version = 1.0)\n\n    job_json = args[\"--in_metafile\"]\n    job_json_file = open(job_json)\n    job_json_str = job_json_file.read()\n    job_json_dict = json.loads(job_json_str)\n    fastq_list = job_json_dict['inputs'][\"fastq_list\"]\n    if isinstance(fastq_list, list):\n        fastq_list = job_json_dict['inputs'][\"fastq_list\"]\n    else:\n        fastq_list = list()\n        fastq_list.append(job_json_dict['inputs'][\"fastq_list\"])\n    file_list = [{elem['path'] : elem['metadata']} for elem in fastq_list]\n    tuple_list = group_inputs(file_list)\n\n    for elem in tuple_list:\n        for i in range(0,len(elem)):\n            elem[i] = {\"class\": \"File\", \"path\": elem[i]}\n\n\n    tuple_list_dict = {\"tuple_list\": tuple_list}\n    with open(args[\"--out_metafile\"], 'w') as p:\n        json.dump(tuple_list_dict, p)\n\nif __name__ == '__main__':\n    main()"
              }
            ]
          }
        ],
        "label": "SBG Pair FASTQs by Metadata",
        "sbg:revision": 4,
        "stdin": "",
        "baseCommand": [
          "python",
          "pair_fastqs_by_metadata.py"
        ],
        "sbg:toolAuthor": "Djordje Klisic, Seven Bridges Genomics, <djordje.klisic@sbgenomics.com>",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "https://cgc.sbgenomics.com/u/stefanristeski/group-fastqs/apps/#sbg-pair-fastqs-by-metadata/9"
          }
        ],
        "sbg:latestRevision": 4,
        "sbg:revisionNotes": "Added support for single file.",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1472135979,
        "sbg:job": {
          "inputs": {
            "fastq_list": [
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/asda/dsa/sda/sda/fasta1.fastq"
              },
              {
                "path": "/asda/dsa/sda/sda/fasta2.fastq"
              },
              {
                "path": "/asda/dsa/sda/sda/fasta3.fastq"
              },
              {
                "path": "/asda/dsa/sda/sda/fasta4.fastq"
              }
            ]
          },
          "allocatedResources": {
            "mem": 1024,
            "cpu": 1
          }
        },
        "sbg:toolkit": "SBGTools",
        "inputs": [
          {
            "inputBinding": {
              "position": 0,
              "separate": true,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "--fastq_list"
            },
            "label": "List of FASTQ files",
            "sbg:stageInput": "link",
            "description": "List of the FASTQ files with properly set metadata fileds.",
            "sbg:fileTypes": "FASTQ, FQ, FASTQ.GZ, FQ.GZ",
            "type": [
              {
                "type": "array",
                "name": "fastq_list",
                "items": "File"
              }
            ],
            "id": "#fastq_list",
            "required": true
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 478.59390467193293,
        "sbg:id": "admin/sbg-public-data/sbg-pair-fastqs-by-metadata/4"
      },
      "id": "#SBG_Pair_FASTQs_by_Metadata",
      "inputs": [
        {
          "source": [
            "#fastq_list"
          ],
          "id": "#SBG_Pair_FASTQs_by_Metadata.fastq_list"
        }
      ],
      "outputs": [
        {
          "id": "#SBG_Pair_FASTQs_by_Metadata.tuple_list"
        }
      ],
      "sbg:y": 478.59390467193293,
      "sbg:x": 68.57145622798534
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1477927984,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/sambamba-merge-0-5-9/18"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "value": {
              "script": "{\n  if ($job.inputs.reserved_threads) {\n    \n    return $job.inputs.reserved_threads\n    \n  } else if ($job.inputs.num_of_threads) {\n    \n    return $job.inputs.num_of_threads\n    \n  } else {\n    \n    return 1\n  }\n  \n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:CPURequirement"
          },
          {
            "value": {
              "script": "{\n  if ($job.inputs.mem_mb) {\n    \n    return $job.inputs.mem_mb\n    \n  } else {\n    \n    return 1024\n    \n  }\n  \n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:MemRequirement"
          },
          {
            "dockerImageId": "",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/mladenlsbg/sambamba:0.5.9"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "SAM/BAM-Processing"
        ],
        "sbg:project": "Durga/exome-sequencing",
        "id": "Durga/exome-sequencing/sambamba-merge-0-5-9/0",
        "outputs": [
          {
            "description": "Merged bam.",
            "label": "Merged bam",
            "outputBinding": {
              "glob": "*.bam",
              "secondaryFiles": [
                ".bai",
                "^.bai"
              ],
              "sbg:inheritMetadataFrom": "#bams"
            },
            "id": "#merged_bam",
            "sbg:fileTypes": "BAM",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "Sambamba Merge",
        "sbg:license": "GNU General Public License v2.0 only",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1477927984,
        "description": "Sambamba Merge is used for merging several sorted BAM files into one. The sorting order of all the files must be the same, and it is maintained in the output file.",
        "stdout": "",
        "arguments": [
          {
            "position": 10,
            "separate": true,
            "valueFrom": {
              "script": "{\n  if ($job.inputs.bams instanceof Array) { // VK\n    if ($job.inputs.bams[0] instanceof Array) {\n      \n      // Support for input received as list of one-element-lists \n      in_var = []\n      for (i=0;i<$job.inputs.bams.length;i++) \n  \t\tin_var = in_var.concat($job.inputs.bams[i]);\n      \n    } else {\n      in_var = [].concat($job.inputs.bams)\n    }\n  \n  \n  } else {\n    in_var = [].concat($job.inputs.bams)\n  }\n  \n  comm=''\n  if(in_var.length==1)\n  {\n  \tcomm+='. '\n  \n  \tif(in_var[0].secondaryFiles!=undefined && in_var[0].secondaryFiles.length>0)\n  \t{\n    \t comm+='| cp '\n    \t comm+=in_var[0].secondaryFiles[0].path\n    \t comm+=' . '\n  \t}\n  }\n  return comm\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          },
          {
            "position": 5,
            "separate": true,
            "valueFrom": {
              "script": "{\n\n  function common_end(strs) {\n  \n  \t// Find minimum length of file name\n  \n  \tls = [];\n    whole = [];\n\tfor (i=0;i<strs.length;i++){\n  \t\tls = ls.concat(strs[i].path.split('/').pop().length);\n        whole = whole.concat(strs[i].path.length);\n  \t}\n \tl = Math.min.apply(Math,ls);\n  \n  \t// Loop from the end through characters and check if they are the same for all\n  \n \tind = 0;\n \tflag = 0;\n \tfor (i=1;i<=l;i++){\n    \tfor (j=1;j<strs.length;j++){\n      \t\tif (strs[0].path[whole[0]-i]!=strs[j].path[whole[j]-i]){\n        \tflag = 1;\n        \tbreak\n      \t\t}\n   \t\t}\n   \t \tif (flag == 1){\n   \t \t  \tbreak\n   \t    } else {\n      \t\tind = ind + 1;\n        }\n  \t }\n  \n  // Assign and return longest ending common substring\n  if (ind>0) {\n  \tcomstr = strs[0].path.slice(-ind);\n  } else {\n    comstr = 'different_extensions'\n  }\n  \n  return comstr\n  \n  }\n  \n  if ($job.inputs.bams instanceof Array) { // VK\n    if ($job.inputs.bams[0] instanceof Array) {\n      \n      // Support for input received as list of one-element-lists \n      in_var = []\n      for (i=0;i<$job.inputs.bams.length;i++) \n  \t\tin_var = in_var.concat($job.inputs.bams[i]);\n      \n    } else {\n      in_var = [].concat($job.inputs.bams)\n    }\n  \n  \n  } else {\n    in_var = [].concat($job.inputs.bams)\n  }\n  \n  prefix=''\n  \n  if(in_var.length==1) { \n    return '' // Input will be just passed to output\n  }else if (in_var[0].metadata){\n \t   if (\"sample_id\" in in_var[0].metadata){   \n  \t\t prefix = in_var[0].metadata[\"sample_id\"];      \n   \t    } else {\n   \t\t  prefix = 'sample_unknown';\n        }\n   \n  }else {\n    prefix = 'sample_unknown';   \n  }\n  \n  // Create joint name and add the merged suffix\n  joint_name = prefix + '_' + common_end(in_var);\n  name = joint_name.split('.').slice(0,-1).join('.') + '.merged.bam'\n  \n  \n  \n  return name\n  \n}\n\n\n",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            }
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/sambamba-merge-0-5-9/18",
        "sbg:cmdPreview": "/opt/sambamba_0.5.9/sambamba_v0.5.9 merge  -t 6  /path/to/uuu_bams.bam  /path/to/uyyy_bams.bam  testmeta__bams.merged.bam",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 684.5238769849158,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Artem Tarasov",
        "sbg:revision": 0,
        "stdin": "",
        "baseCommand": [
          {
            "script": "{\n  if ($job.inputs.bams instanceof Array) { // VK\n    if ($job.inputs.bams[0] instanceof Array) {\n      \n      // Support for input received as list of one-element-lists \n      in_var = []\n      for (i=0;i<$job.inputs.bams.length;i++) \n  \t\tin_var = in_var.concat($job.inputs.bams[i]);\n      \n    } else {\n      in_var = [].concat($job.inputs.bams)\n    }\n  \n  \n  } else {\n    in_var = [].concat($job.inputs.bams)\n  }\n  comm=''\n  if(in_var instanceof Array) // Always true\n  {\n    if(in_var.length==1)\n    {\n      comm+='cp '\n      \n    }\n  \telse if(in_var.length>1)\n  \t{\n    \n    \tcomm+='/opt/sambamba_0.5.9/sambamba_v0.5.9 merge '\n    \tif($job.inputs.num_of_threads)\n  \t\t{\n    \t\tcomm+=' -t '\n    \t\tcomm+=$job.inputs.num_of_threads\n  \t\t}\n  \t\tif($job.inputs.compression_level)\n  \t\t{\n   \t\t\tcomm+=' -l '\n    \t\tcomm+=$job.inputs.compression_level\n  \t\t}\n   \t\t\n    }\n  \n  \t\n\n  }\n  return comm\n}",
            "class": "Expression",
            "engine": "#cwl-js-engine"
          }
        ],
        "sbg:toolkit": "Sambamba",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://lomereiter.github.io/sambamba/docs/sambamba-view.html"
          },
          {
            "label": "Source code",
            "id": "https://github.com/lomereiter/sambamba"
          },
          {
            "label": "Wiki",
            "id": "https://github.com/lomereiter/sambamba/wiki"
          },
          {
            "label": "Download",
            "id": "https://github.com/lomereiter/sambamba/releases/tag/v0.5.9"
          },
          {
            "label": "Publication",
            "id": "http://lomereiter.github.io/sambamba/docs/sambamba-view.html"
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/sambamba-merge-0-5-9/18",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1477927984,
        "sbg:job": {
          "inputs": {
            "mem_mb": 2,
            "reserved_threads": 2,
            "compression_level": null,
            "bams": [
              {
                "size": 0,
                "class": "File",
                "metadata": {
                  "sample_id": "testmeta"
                },
                "secondaryFiles": [],
                "path": "/path/to/uuu_bams.bam"
              },
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/uyyy_bams.bam"
              }
            ],
            "num_of_threads": 6
          },
          "allocatedResources": {
            "mem": 2,
            "cpu": 2
          }
        },
        "appUrl": "/u/Durga/exome-sequencing/apps/#Durga/exome-sequencing/sambamba-merge-0-5-9/0",
        "sbg:toolkitVersion": "0.5.9",
        "inputs": [
          {
            "sbg:toolDefaultValue": "1",
            "label": "Number of threads reserved on the instance",
            "id": "#reserved_threads",
            "type": [
              "null",
              "int"
            ],
            "description": "Number of threads reserved on the instance passed to the scheduler (number of jobs).",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "description": "Number of threads to use for compression/decompression.",
            "label": "Number of threads to use",
            "id": "#num_of_threads",
            "type": [
              "null",
              "int"
            ],
            "required": false,
            "sbg:category": "Merge"
          },
          {
            "sbg:toolDefaultValue": "1024",
            "label": "Memory in MB",
            "sbg:stageInput": null,
            "id": "#mem_mb",
            "type": [
              "null",
              "int"
            ],
            "description": "Memory in MB.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "description": "Level of compression for merged BAM file, number from 0 to 9.",
            "label": "Compression level",
            "id": "#compression_level",
            "type": [
              "null",
              "int"
            ],
            "required": false,
            "sbg:category": "Merge"
          },
          {
            "inputBinding": {
              "position": 5,
              "separate": true,
              "sbg:cmdInclude": true,
              "itemSeparator": null
            },
            "label": "BAM files",
            "description": "Input BAM files.",
            "sbg:fileTypes": "BAM",
            "type": [
              {
                "type": "array",
                "name": "bams",
                "items": "File"
              }
            ],
            "id": "#bams",
            "required": true,
            "sbg:category": "Merge"
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 300.650986988268,
        "sbg:id": "Durga/exome-sequencing/sambamba-merge-0-5-9/0"
      },
      "id": "#Sambamba_Merge",
      "inputs": [
        {
          "id": "#Sambamba_Merge.reserved_threads"
        },
        {
          "id": "#Sambamba_Merge.num_of_threads"
        },
        {
          "id": "#Sambamba_Merge.mem_mb"
        },
        {
          "id": "#Sambamba_Merge.compression_level"
        },
        {
          "source": [
            "#BWA_MEM_Bundle.aligned_reads"
          ],
          "id": "#Sambamba_Merge.bams"
        }
      ],
      "outputs": [
        {
          "id": "#Sambamba_Merge.merged_bam"
        }
      ],
      "sbg:y": 300.650986988268,
      "sbg:x": 684.5238769849158
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1447844103,
            "sbg:revision": 0,
            "sbg:modifiedBy": "sanja.mijalkovic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1447866202,
            "sbg:revision": 1,
            "sbg:modifiedBy": "aleksandar.mihajlovic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1448043234,
            "sbg:revision": 2,
            "sbg:modifiedBy": "aleksandar.mihajlovic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1454681650,
            "sbg:revision": 3,
            "sbg:modifiedBy": "djordje_klisic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1461762512,
            "sbg:revision": 4,
            "sbg:modifiedBy": "djordje_klisic",
            "sbg:revisionNotes": null
          },
          {
            "sbg:modifiedOn": 1473165032,
            "sbg:revision": 5,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "Scatter metadata support."
          },
          {
            "sbg:modifiedOn": 1473165032,
            "sbg:revision": 6,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "metadata scatter 2"
          },
          {
            "sbg:modifiedOn": 1473165032,
            "sbg:revision": 7,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "scatter metadata 3"
          },
          {
            "sbg:modifiedOn": 1473165032,
            "sbg:revision": 8,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": ".bai as secondary."
          },
          {
            "sbg:modifiedOn": 1473165032,
            "sbg:revision": 9,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "output single file."
          },
          {
            "sbg:modifiedOn": 1476440186,
            "sbg:revision": 10,
            "sbg:modifiedBy": "admin",
            "sbg:revisionNotes": "Added support for run without intervals"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "47510cb2da55",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/stefanristeski/gatk2-lite:2.3-9"
          },
          {
            "value": {
              "script": "{\n  if($job.inputs.cpu_per_job){\n  \treturn $job.inputs.cpu_per_job\n  }\n\treturn 1\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:CPURequirement"
          },
          {
            "value": {
              "script": "{\n  if($job.inputs.memory_per_job){\n    if($job.inputs.memory_overhead_per_job){\n    \treturn $job.inputs.memory_per_job + $job.inputs.memory_overhead_per_job\n    }\n    else\n  \t\treturn $job.inputs.memory_per_job\n  }\n  else if(!$job.inputs.memory_per_job && $job.inputs.memory_overhead_per_job){\n\t\treturn 2048 + $job.inputs.memory_overhead_per_job  \n  }\n  else\n  \treturn 2048\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "admin",
        "sbg:categories": [
          "Alignment"
        ],
        "sbg:project": "admin/sbg-public-data",
        "id": "admin/sbg-public-data/gatk-2-3-9-lite-indelrealigner/10",
        "outputs": [
          {
            "description": "Realigned BAM.",
            "label": "Realigned BAM",
            "outputBinding": {
              "secondaryFiles": [
                ".bai",
                "^.bai"
              ],
              "glob": "*.realigned.bam",
              "sbg:inheritMetadataFrom": "#reads",
              "sbg:metadata": {
                "intervals_file": {
                  "script": "{\n  if ($job.inputs.target_intervals)\n    if($job.inputs.target_intervals.metadata)\n      if('intervals_file' in $job.inputs.target_intervals.metadata)\n        return $job.inputs.target_intervals.metadata.intervals_file\n  return 'NO_INTERVALS'\n}",
                  "class": "Expression",
                  "engine": "#cwl-js-engine"
                }
              }
            },
            "id": "#realigned_bam_file",
            "sbg:fileTypes": "BAM",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "GATK IndelRealigner",
        "sbg:license": "MIT License",
        "sbg:contributors": [
          "djordje_klisic",
          "sanja.mijalkovic",
          "admin",
          "aleksandar.mihajlovic"
        ],
        "sbg:createdOn": 1447844103,
        "description": "Overview\n\nThe local realignment process is designed to consume one or more BAM files and to locally realign reads such that the number of mismatching bases is minimized across all the reads. In general, a large percent of regions requiring local realignment are due to the presence of an insertion or deletion (indels) in the individual's genome with respect to the reference genome. Such alignment artifacts result in many bases mismatching the reference near the misalignment, which are easily mistaken as SNPs. Moreover, since read mapping algorithms operate on each read independently, it is impossible to place reads on the reference genome such at mismatches are minimized across all reads. Consequently, even when some reads are correctly mapped with indels, reads covering the indel near just the start or end of the read are often incorrectly mapped with respect the true indel, also requiring realignment. Local realignment serves to transform regions with misalignments due to indels into clean reads containing a consensus indel suitable for standard variant discovery approaches. Unlike most mappers, this walker uses the full alignment context to determine whether an appropriate alternate reference (i.e. indel) exists. Following local realignment, the GATK tool Unified Genotyper can be used to sensitively and specifically identify indels.\n\nThere are 2 steps to the realignment process:\n\n1. Determining (small) suspicious intervals which are likely in need of realignment (see the RealignerTargetCreator tool)\n2. Running the realigner over those intervals (IndelRealigner)\nFor more details, see the indel realignment method documentation.\n\nInput\nOne or more aligned BAM files and optionally one or more lists of known indels.\n\nOutput\nA realigned version of your input BAM file(s).\n\nUsage example:\n java -jar GenomeAnalysisTK.jar \\\n   -T IndelRealigner \\\n   -R reference.fasta \\\n   -I input.bam \\\n   --known indels.vcf \\\n   -targetIntervals intervalListFromRTC.intervals \\\n   -o realignedBam.bam\n \nCaveats\n\nThe input BAM(s), reference, and known indel file(s) should be the same ones to be used for the IndelRealigner step.\nBecause reads produced from the 454 technology inherently contain false indels, the realigner will not work with them (or with reads from similar technologies).\nThis tool also ignores MQ0 reads and reads with consecutive indel operators in the CIGAR string.\n\n(IMPORTANT) Reference \".fasta\" Secondary Files\n\nTools in GATK that require a fasta reference file also look for the reference file's corresponding .fai (fasta index) and .dict (fasta dictionary) files. The fasta index file allows random access to reference bases and the dictionary file is a dictionary of the contig names and sizes contained within the fasta reference. These two secondary files are essential for GATK to work properly. To append these two files to your fasta reference please use the 'SBG FASTA Indices' tool within your GATK based workflow before using any of the GATK tools.",
        "stdout": "",
        "arguments": [
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  read_name = [].concat($job.inputs.target_intervals)[0].path.replace(/^.*[\\\\\\/]/, '').split('.')\n  read_namebase = read_name.slice(0, read_name.length-1).join('.')\n  return read_namebase + '.realigned.bam'\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "prefix": "--out"
          }
        ],
        "sbg:cmdPreview": "java -Xmx2048M -jar /opt/GenomeAnalysisTKLite.jar --analysis_type IndelRealigner --reference_sequence /folder/reference.fasta --input_file /folder/input.bam --targetIntervals intervalListFromRTC.intervals --out intervalListFromRTC.realigned.bam",
        "sbg:createdBy": "sanja.mijalkovic",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 1302.1429474013198,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Broad Institute",
        "sbg:revision": 10,
        "stdin": "",
        "baseCommand": [
          "java",
          {
            "script": "{   \n  if($job.inputs.memory_per_job){\n    return '-Xmx'.concat($job.inputs.memory_per_job, 'M')\n  }   \n  \treturn '-Xmx2048M'\n}",
            "class": "Expression",
            "engine": "#cwl-js-engine"
          },
          "-jar",
          "/opt/GenomeAnalysisTKLite.jar",
          "--analysis_type",
          "IndelRealigner"
        ],
        "sbg:toolkit": "GATK",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "https://www.broadinstitute.org/gatk/index.php"
          },
          {
            "label": "Source code",
            "id": "https://github.com/broadgsa/gatk-protected"
          },
          {
            "label": "Wiki",
            "id": "https://www.broadinstitute.org/gatk/guide/pdfdocs/GATK_GuideBook_2.3-9.pdf"
          },
          {
            "label": "Download",
            "id": "https://www.broadinstitute.org/gatk/download/auth?package=GATK-archive&version=2.3-9-ge5ebf34"
          },
          {
            "label": "Publication",
            "id": "https://www.broadinstitute.org/gatk/about/#in-the-literature"
          },
          {
            "label": "Documentation",
            "id": "https://www.broadinstitute.org/gatk/gatkdocs/org_broadinstitute_gatk_tools_walkers_indels_IndelRealigner.php"
          }
        ],
        "sbg:latestRevision": 10,
        "sbg:revisionNotes": "Added support for run without intervals",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1476440186,
        "sbg:job": {
          "inputs": {
            "intervals": "",
            "target_intervals": {
              "size": 0,
              "class": "File",
              "metadata": {
                "intervals_file": "treterfgsdfsd.4444"
              },
              "secondaryFiles": [],
              "path": "intervalListFromRTC.intervals"
            },
            "known_alleles": [
              {
                "path": "/folder/indels.vcf"
              }
            ],
            "memory_overhead_per_job": 1000,
            "intervals_file": [
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/intervals_file-1.ext"
              },
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/intervals_file-2.ext"
              }
            ],
            "reference": {
              "path": "/folder/reference.fasta"
            },
            "memory_per_job": null,
            "reads": [
              {
                "path": "/folder/input.bam"
              }
            ]
          },
          "allocatedResources": {
            "mem": 3048,
            "cpu": 1
          }
        },
        "appUrl": "/public/apps/#tool/admin/sbg-public-data/gatk-2-3-9-lite-indelrealigner/10",
        "sbg:toolkitVersion": "2.3.9 Lite",
        "inputs": [
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "validation_strictness",
                "symbols": [
                  "SILENT",
                  "LENIENT",
                  "STRICT"
                ]
              }
            ],
            "sbg:toolDefaultValue": "SILENT",
            "label": "Validation Strictness",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--validation_strictness"
            },
            "sbg:altPrefix": "-S",
            "id": "#validation_strictness",
            "description": "How strict should we be with validation.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Use Original Qualities",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--useOriginalQualities"
            },
            "sbg:altPrefix": "-OQ",
            "id": "#use_original_qualities",
            "description": "If set, use the original base quality scores from the OQ tag when present instead of the standard scores.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Use Legacy Downsampler",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--use_legacy_downsampler"
            },
            "sbg:altPrefix": "-use_legacy_downsampler",
            "id": "#use_legacy_downsampler",
            "description": "Use the legacy downsampling implementation instead of the newer, less-tested implementation.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "unsafe",
                "symbols": [
                  "ALLOW_UNINDEXED_BAM",
                  "ALLOW_UNSET_BAM_SORT_ORDER",
                  "NO_READ_ORDER_VERIFICATION",
                  "ALLOW_SEQ_DICT_INCOMPATIBILITY",
                  "LENIENT_VCF_PROCESSING",
                  "ALL"
                ]
              }
            ],
            "sbg:toolDefaultValue": "",
            "label": "Unsafe",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--unsafe"
            },
            "sbg:altPrefix": "-U",
            "id": "#unsafe",
            "description": "If set, enables unsafe operations: nothing will be checked at runtime.  For expert users only who know what they are doing.  We do not support usage of this argument.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--targetIntervals"
            },
            "label": "Target Intervals",
            "id": "#target_intervals",
            "sbg:fileTypes": "TXT,INTERVALS",
            "sbg:altPrefix": "-targetIntervals",
            "sbg:category": "Input Files",
            "description": "Intervals file output from RealignerTargetCreator.",
            "type": [
              "File"
            ],
            "required": true
          },
          {
            "type": [
              "null",
              "string"
            ],
            "sbg:toolDefaultValue": "",
            "label": "Tag",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--tag"
            },
            "sbg:altPrefix": "-tag",
            "id": "#tag",
            "description": "Arbitrary tag string to identify this GATK run as part of a group of runs, for later analysis.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Remove Program Records",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--remove_program_records"
            },
            "sbg:altPrefix": "-rpr",
            "id": "#remove_program_records",
            "description": "Should we override the Walker's default and remove program records from the SAM header.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": " ",
              "sbg:cmdInclude": true,
              "prefix": "--reference_sequence"
            },
            "label": "Reference Genome",
            "id": "#reference",
            "sbg:fileTypes": "FASTA, FA",
            "sbg:altPrefix": "-R",
            "sbg:category": "Input Files",
            "description": "Reference Genome in FASTA format.",
            "type": [
              "File"
            ],
            "required": true
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "secondaryFiles": [
                ".bai"
              ],
              "prefix": "--input_file"
            },
            "label": "Read sequences",
            "id": "#reads",
            "sbg:fileTypes": "SAM, BAM",
            "sbg:altPrefix": "-I",
            "sbg:category": "Input Files",
            "description": "Read sequences in BAM format.",
            "type": [
              {
                "type": "array",
                "name": "reads",
                "items": "File"
              }
            ],
            "required": true
          },
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": "string"
              }
            ],
            "sbg:toolDefaultValue": "[]",
            "label": "Read Group Black List",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--read_group_black_list"
            },
            "sbg:altPrefix": "-rgbl",
            "id": "#read_group_black_list",
            "description": "Filters out read groups matching : or a .txt file containing the filter strings one per line.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": {
                  "type": "enum",
                  "name": "read_filter",
                  "symbols": [
                    "BadCigarFilter",
                    "BadMateFilter",
                    "CountingFilteringIterator.CountingReadFilter",
                    "DuplicateReadFilter",
                    "FailsVendorQualityCheckFilter",
                    "HCMappingQualityFilter",
                    "LibraryReadFilter",
                    "MalformedReadFilter",
                    "MappingQualityFilter",
                    "MappingQualityUnavailableFilter",
                    "MappingQualityZeroFilter",
                    "MateSameStrandFilter",
                    "MaxInsertSizeFilter",
                    "MissingReadGroupFilter",
                    "NoOriginalQualityScoresFilter",
                    "NotPrimaryAlignmentFilter",
                    "OverclippedReadFilter",
                    "Platform454Filter",
                    "PlatformFilter",
                    "PlatformUnitFilter",
                    "ReadGroupBlackListFilter",
                    "ReadLengthFilter",
                    "ReadNameFilter",
                    "ReadStrandFilter",
                    "ReassignMappingQualityFilter",
                    "ReassignOneMappingQualityFilter",
                    "SampleFilter",
                    "SingleReadGroupFilter",
                    "UnmappedReadFilter"
                  ]
                }
              }
            ],
            "sbg:toolDefaultValue": "[]",
            "label": "Read Filter",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--read_filter"
            },
            "sbg:altPrefix": "-rf",
            "id": "#read_filter",
            "description": "Specify filtration criteria to apply to each read individually.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "6",
            "label": "Preserve Qscores Less Than",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--preserve_qscores_less_than"
            },
            "sbg:altPrefix": "-preserveQ",
            "id": "#preserve_qscores_less_than",
            "description": "Bases with quality scores less than this threshold won't be recalibrated (with -BQSR).",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "phone_home",
                "symbols": [
                  "NO_ET",
                  "STANDARD"
                ]
              }
            ],
            "sbg:toolDefaultValue": "STANDARD",
            "label": "Phone Home",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--phone_home"
            },
            "sbg:altPrefix": "-et",
            "id": "#phone_home",
            "description": "What kind of GATK run report should we generate? STANDARD is the default, can be NO_ET so nothing is posted to the run repository. Please see http://gatkforums.broadinstitute.org/discussion/1250/what-is-phone-home-and-how-does-it-affect-me#latest for details.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "pedigree_validation_type",
                "symbols": [
                  "STRICT",
                  "SILENT"
                ]
              }
            ],
            "sbg:toolDefaultValue": "STRICT",
            "label": "Pedigree Validation Type",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--pedigreeValidationType"
            },
            "sbg:altPrefix": "-pedValidationType",
            "id": "#pedigree_validation_type",
            "description": "How strict should we be in validating the pedigree information?.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "array",
                "items": "string"
              }
            ],
            "sbg:toolDefaultValue": "[]",
            "label": "Pedigree String",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--pedigreeString"
            },
            "sbg:altPrefix": "-pedString",
            "id": "#pedigree_string",
            "description": "Pedigree string for samples.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Non Deterministic Random Seed",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--nonDeterministicRandomSeed"
            },
            "sbg:altPrefix": "-ndrs",
            "id": "#non_deterministic_random_seed",
            "description": "Makes the GATK behave non deterministically, that is, the random numbers generated will be different in every run.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "No Original Alignment Tags",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--noOriginalAlignmentTags"
            },
            "sbg:altPrefix": "-noTags",
            "id": "#no_original_alignment_tags",
            "description": "Don't output the original cigar or alignment start tags for each realigned read in the output bam.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "2048",
            "label": "Memory per job",
            "id": "#memory_per_job",
            "sbg:altPrefix": null,
            "description": "Amount of RAM memory in MB to be used per job.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "sbg:toolDefaultValue": "0",
            "label": "Memory overhead per job",
            "id": "#memory_overhead_per_job",
            "type": [
              "null",
              "int"
            ],
            "description": "Memory overhead per job. By default this parameter value is set to '0' (zero megabytes). This parameter value is added to the Memory per job parameter value. This results in the allocation of the sum total (Memory per job and Memory overhead per job) amount of memory per job. By default the memory per job parameter value is set to 2048 megabytes, unless specified otherwise.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "max_runtime_units",
                "symbols": [
                  "NANOSECONDS",
                  "MICROSECONDS",
                  "MILLISECONDS",
                  "SECONDS",
                  "MINUTES",
                  "HOURS",
                  "DAYS"
                ]
              }
            ],
            "sbg:toolDefaultValue": "MINUTES",
            "label": "Max Runtime Units",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxRuntimeUnits"
            },
            "sbg:altPrefix": "-maxRuntimeUnits",
            "id": "#max_runtime_units",
            "description": "The TimeUnit for maxRuntime.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "-1",
            "label": "Max Runtime",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxRuntime"
            },
            "sbg:altPrefix": "-maxRuntime",
            "id": "#max_runtime",
            "description": "If provided, that GATK will stop execution cleanly as soon after maxRuntime has been exceeded, truncating the run but not exiting with a failure.  By default the value is interpreted in minutes, but this can be changed by maxRuntimeUnits.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "150000",
            "label": "Max Reads In Memory",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxReadsInMemory"
            },
            "sbg:altPrefix": "-maxInMemory",
            "id": "#max_reads_in_memory",
            "description": "Max reads allowed to be kept in memory at a time by the SAMFileWriter.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "20000",
            "label": "Max Reads For Realignment",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxReadsForRealignment"
            },
            "sbg:altPrefix": "-maxReads",
            "id": "#max_reads_for_realignment",
            "description": "Max reads allowed at an interval for realignment.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "120",
            "label": "Max Reads For Consensuses",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxReadsForConsensuses"
            },
            "sbg:altPrefix": "-greedy",
            "id": "#max_reads_for_consensuses",
            "description": "Max reads used for finding the alternate consensuses (necessary to improve performance in deep coverage).",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "200",
            "label": "Max Positional Move Allowed",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxPositionalMoveAllowed"
            },
            "sbg:altPrefix": "-maxPosMove",
            "id": "#max_positional_move_allowed",
            "description": "Maximum positional move in basepairs that a read can be adjusted during realignment.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "3000",
            "label": "Max Isize For Movement",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxIsizeForMovement"
            },
            "sbg:altPrefix": "-maxIsize",
            "id": "#max_isize_for_movement",
            "description": "Maximum insert size of read pairs that we attempt to realign.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "30",
            "label": "Max Consensuses",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--maxConsensuses"
            },
            "sbg:altPrefix": null,
            "id": "#max_consensuses",
            "description": "Max alternate consensuses to try (necessary to improve performance in deep coverage).",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "5.0",
            "label": "Lod Threshold For Cleaning",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--LODThresholdForCleaning"
            },
            "sbg:altPrefix": "-LOD",
            "id": "#lod_threshold_for_cleaning",
            "description": "LOD threshold above which the cleaner will clean.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--knownAlleles"
            },
            "label": "Known Alleles",
            "id": "#known_alleles",
            "sbg:fileTypes": "VCF",
            "sbg:altPrefix": "-known",
            "sbg:category": "Input Files",
            "description": "Input VCF file(s) with known indels.",
            "type": [
              "null",
              {
                "type": "array",
                "items": "File"
              }
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Keep Program Records",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--keep_program_records"
            },
            "sbg:altPrefix": "-kpr",
            "id": "#keep_program_records",
            "description": "Should we override the Walker's default and keep program records from the SAM header.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "inputBinding": {
              "separate": true,
              "valueFrom": {
                "script": "{\n  if($job.inputs.intervals_file instanceof Array)\n    if($job.inputs.target_intervals.metadata)\n      if($job.inputs.target_intervals.metadata.intervals_file)\n        return '--intervals ' + $job.inputs.target_intervals.metadata.intervals_file\n  \n  if($job.inputs.intervals_file)\n    return '--intervals ' + $job.inputs.intervals_file.path\n  else\n    return ''\n}",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "itemSeparator": null
            },
            "label": "Intervals",
            "sbg:stageInput": "link",
            "id": "#intervals_file",
            "sbg:fileTypes": "TXT, BED, VCF",
            "sbg:altPrefix": "-L",
            "sbg:category": "Input Files",
            "description": "One or more genomic intervals over which to operate. Can be an specified in an .intervals file or a rod file.",
            "type": [
              "null",
              {
                "type": "array",
                "name": "intervals_file",
                "items": "File"
              }
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "string"
            ],
            "sbg:toolDefaultValue": "sample",
            "label": "Intervals",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "-L"
            },
            "sbg:altPrefix": null,
            "id": "#intervals",
            "description": "One or more genomic intervals over which to operate.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "interval_set_rule",
                "symbols": [
                  "UNION",
                  "INTERSECTION"
                ]
              }
            ],
            "sbg:toolDefaultValue": "UNION",
            "label": "Interval Set Rule",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--interval_set_rule"
            },
            "sbg:altPrefix": "-isr",
            "id": "#interval_set_rule",
            "description": "Indicates the set merging approach the interval parser should use to combine the various -L or -XL inputs.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Interval Padding",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--interval_padding"
            },
            "sbg:altPrefix": "-ip",
            "id": "#interval_padding",
            "description": "Indicates how many basepairs of padding to include around each of the intervals specified with the -L/--intervals argument.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "interval_merging",
                "symbols": [
                  "ALL",
                  "OVERLAPPING_ONLY"
                ]
              }
            ],
            "sbg:toolDefaultValue": "ALL",
            "label": "Interval Merging",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--interval_merging"
            },
            "sbg:altPrefix": "-im",
            "id": "#interval_merging",
            "description": "Indicates the interval merging rule we should use for abutting intervals.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": " ",
              "sbg:cmdInclude": true,
              "prefix": "--gatk_key"
            },
            "label": "Gatk key",
            "id": "#gatk_key",
            "sbg:fileTypes": "KEY, LICENSE",
            "sbg:altPrefix": "-K",
            "sbg:category": "Input Files",
            "description": "GATK Key file. Required if running with -et NO_ET. Please see http://gatkforums.broadinstitute.org/discussion/1250/what-is-phone-home-and-how-does-it-affect-me#latest for details.",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Fix Misencoded Quals",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "-fixMisencodedQuals"
            },
            "sbg:altPrefix": "-fixMisencodedQuals",
            "id": "#fix_misencoded_quals",
            "description": "Fix mis-encoded base quality scores.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "inputBinding": {
              "separate": true,
              "itemSeparator": " ",
              "sbg:cmdInclude": true,
              "prefix": "--excludeIntervals"
            },
            "label": "Exclude Intervals",
            "id": "#exclude_intervals",
            "sbg:fileTypes": "TXT, BED, VCF",
            "sbg:altPrefix": "-XL",
            "sbg:category": "Input Files",
            "description": "One or more genomic intervals to exclude from processing. Can be an .intervals file or a rod file.",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0.15",
            "label": "Entropy Threshold",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--entropyThreshold"
            },
            "sbg:altPrefix": "-entropy",
            "id": "#entropy_threshold",
            "description": "Percentage of mismatches at a locus to be considered having high entropy.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Emit Original Quals",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--emit_original_quals"
            },
            "sbg:altPrefix": "-EOQ",
            "id": "#emit_original_quals",
            "description": "If true, enables printing of the OQ tag with the original base qualities (with -BQSR).",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "downsampling_type",
                "symbols": [
                  "NONE",
                  "ALL_READS",
                  "BY_SAMPLE"
                ]
              }
            ],
            "sbg:toolDefaultValue": "",
            "label": "Downsampling Type",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--downsampling_type"
            },
            "sbg:altPrefix": "-dt",
            "id": "#downsampling_type",
            "description": "Type of reads downsampling to employ at a given locus. Reads will be selected randomly to be removed from the pile based on the method described here.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "",
            "label": "Downsample to Fraction",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--downsample_to_fraction"
            },
            "sbg:altPrefix": "-dfrac",
            "id": "#downsample_to_fraction",
            "description": "Fraction [0.0-1.0] of reads to downsample to.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "",
            "label": "Downsample to Coverage",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--downsample_to_coverage"
            },
            "sbg:altPrefix": "-dcov",
            "id": "#downsample_to_coverage",
            "description": "Coverage to downsample to at any given locus; note that downsampled reads are randomly selected from all possible reads at a locus. For non-locus-based traversals (eg., ReadWalkers), this sets the maximum number of reads at each alignment start position.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Disable Randomization",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--disableRandomization"
            },
            "sbg:altPrefix": null,
            "id": "#disable_radnomization",
            "description": "Completely eliminates randomization from nondeterministic methods. To be used mostly in the testing framework where dynamic parallelism can result in differing numbers of calls to the generator.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Disable Indel Quals",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--disable_indel_quals"
            },
            "sbg:altPrefix": "-DIQ",
            "id": "#disable_indel_quals",
            "description": "If 'true', disables printing of base insertion and base deletion tags (with -BQSR). Turns off printing of the base insertion and base deletion tags when using the -BQSR argument and only the base substitution qualities will be produced.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "-1",
            "label": "Default Base Qualities",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--defaultBaseQualities"
            },
            "sbg:altPrefix": "-DBQ",
            "id": "#default_base_qualities",
            "description": "If reads are missing some or all base quality scores, this value will be used for all base quality scores.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "1",
            "label": "CPU per job",
            "id": "#cpu_per_job",
            "sbg:altPrefix": null,
            "description": "Number of CPUs per job.",
            "required": false,
            "sbg:category": "Execution"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "consensus_determination_model",
                "symbols": [
                  "KNOWNS_ONLY",
                  "USE_READS",
                  "USE_SW"
                ]
              }
            ],
            "sbg:toolDefaultValue": "USE_READS",
            "label": "Consensus Determination Model",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--consensusDeterminationModel"
            },
            "sbg:altPrefix": "-model",
            "id": "#consensus_determination_model",
            "description": "Determines how to compute the possible alternate consenses.",
            "required": false,
            "sbg:category": "Indel Realigner"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "40.0",
            "label": "BAQ Gap Open Penalty",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--baqGapOpenPenalty"
            },
            "sbg:altPrefix": "-baqGOP",
            "id": "#baq_gap_open_penalty",
            "description": "BAQ gap open penalty (Phred Scaled). Default value is 40. 30 is perhaps better for whole genome call sets.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              {
                "type": "enum",
                "name": "baq",
                "symbols": [
                  "OFF",
                  "CALCULATE_AS_NECESSARY",
                  "RECALCULATE"
                ]
              }
            ],
            "sbg:toolDefaultValue": "OFF",
            "label": "BAQ Calculation Type",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "--baq"
            },
            "sbg:altPrefix": "-baq",
            "id": "#baq",
            "description": "Type of BAQ calculation to apply in the engine.",
            "required": false,
            "sbg:category": "GATK General"
          },
          {
            "type": [
              "null",
              "boolean"
            ],
            "sbg:toolDefaultValue": "False",
            "label": "Allow Potentially Misencoded Quals",
            "inputBinding": {
              "separate": true,
              "itemSeparator": null,
              "sbg:cmdInclude": true,
              "prefix": "-allowPotentiallyMisencodedQuals"
            },
            "sbg:altPrefix": "--allow_potentially_misencoded_quality_scores",
            "id": "#allow_potentailly_misencoded_quals",
            "description": "Do not fail when encountered base qualities that are too high and seemingly indicate a problem with the base quality encoding of the BAM file.",
            "required": false,
            "sbg:category": "GATK General"
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 146.22233115951536,
        "sbg:id": "admin/sbg-public-data/gatk-2-3-9-lite-indelrealigner/10"
      },
      "id": "#GATK_IndelRealigner",
      "inputs": [
        {
          "id": "#GATK_IndelRealigner.validation_strictness"
        },
        {
          "id": "#GATK_IndelRealigner.use_original_qualities"
        },
        {
          "id": "#GATK_IndelRealigner.use_legacy_downsampler"
        },
        {
          "id": "#GATK_IndelRealigner.unsafe"
        },
        {
          "source": [
            "#target_intervals"
          ],
          "id": "#GATK_IndelRealigner.target_intervals"
        },
        {
          "id": "#GATK_IndelRealigner.tag"
        },
        {
          "id": "#GATK_IndelRealigner.remove_program_records"
        },
        {
          "source": [
            "#SBG_FASTA_Indices.fasta_reference"
          ],
          "id": "#GATK_IndelRealigner.reference"
        },
        {
          "source": [
            "#Picard_BuildBamIndex.indexed_bam"
          ],
          "id": "#GATK_IndelRealigner.reads"
        },
        {
          "id": "#GATK_IndelRealigner.read_group_black_list"
        },
        {
          "id": "#GATK_IndelRealigner.read_filter"
        },
        {
          "id": "#GATK_IndelRealigner.preserve_qscores_less_than"
        },
        {
          "id": "#GATK_IndelRealigner.phone_home"
        },
        {
          "id": "#GATK_IndelRealigner.pedigree_validation_type"
        },
        {
          "id": "#GATK_IndelRealigner.pedigree_string"
        },
        {
          "id": "#GATK_IndelRealigner.non_deterministic_random_seed"
        },
        {
          "id": "#GATK_IndelRealigner.no_original_alignment_tags"
        },
        {
          "id": "#GATK_IndelRealigner.memory_per_job"
        },
        {
          "id": "#GATK_IndelRealigner.memory_overhead_per_job"
        },
        {
          "id": "#GATK_IndelRealigner.max_runtime_units"
        },
        {
          "id": "#GATK_IndelRealigner.max_runtime"
        },
        {
          "id": "#GATK_IndelRealigner.max_reads_in_memory"
        },
        {
          "id": "#GATK_IndelRealigner.max_reads_for_realignment"
        },
        {
          "id": "#GATK_IndelRealigner.max_reads_for_consensuses"
        },
        {
          "id": "#GATK_IndelRealigner.max_positional_move_allowed"
        },
        {
          "id": "#GATK_IndelRealigner.max_isize_for_movement"
        },
        {
          "id": "#GATK_IndelRealigner.max_consensuses"
        },
        {
          "id": "#GATK_IndelRealigner.lod_threshold_for_cleaning"
        },
        {
          "id": "#GATK_IndelRealigner.known_alleles"
        },
        {
          "id": "#GATK_IndelRealigner.keep_program_records"
        },
        {
          "id": "#GATK_IndelRealigner.intervals_file"
        },
        {
          "id": "#GATK_IndelRealigner.intervals"
        },
        {
          "id": "#GATK_IndelRealigner.interval_set_rule"
        },
        {
          "id": "#GATK_IndelRealigner.interval_padding"
        },
        {
          "id": "#GATK_IndelRealigner.interval_merging"
        },
        {
          "id": "#GATK_IndelRealigner.gatk_key"
        },
        {
          "id": "#GATK_IndelRealigner.fix_misencoded_quals"
        },
        {
          "id": "#GATK_IndelRealigner.exclude_intervals"
        },
        {
          "id": "#GATK_IndelRealigner.entropy_threshold"
        },
        {
          "id": "#GATK_IndelRealigner.emit_original_quals"
        },
        {
          "id": "#GATK_IndelRealigner.downsampling_type"
        },
        {
          "id": "#GATK_IndelRealigner.downsample_to_fraction"
        },
        {
          "id": "#GATK_IndelRealigner.downsample_to_coverage"
        },
        {
          "id": "#GATK_IndelRealigner.disable_radnomization"
        },
        {
          "id": "#GATK_IndelRealigner.disable_indel_quals"
        },
        {
          "id": "#GATK_IndelRealigner.default_base_qualities"
        },
        {
          "id": "#GATK_IndelRealigner.cpu_per_job"
        },
        {
          "id": "#GATK_IndelRealigner.consensus_determination_model"
        },
        {
          "id": "#GATK_IndelRealigner.baq_gap_open_penalty"
        },
        {
          "id": "#GATK_IndelRealigner.baq"
        },
        {
          "id": "#GATK_IndelRealigner.allow_potentailly_misencoded_quals"
        }
      ],
      "outputs": [
        {
          "id": "#GATK_IndelRealigner.realigned_bam_file"
        }
      ],
      "sbg:y": 146.22233115951536,
      "sbg:x": 1302.1429474013198
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1479408953,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/fbd/79"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": 2000,
            "class": "sbg:MemRequirement"
          },
          {
            "dockerImageId": "",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/nevenam/freebayes:1.0.2"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "Variant-Calling"
        ],
        "sbg:project": "Durga/exome-sequencing",
        "id": "Durga/exome-sequencing/fbd/0",
        "outputs": [
          {
            "description": "VCF or GVCF file with the variant calls.",
            "label": "Variants",
            "outputBinding": {
              "glob": {
                "script": "{\n  if($job.inputs.gvcf)\n  {\n    if($job.inputs.bams instanceof Array && $job.inputs.bams.length>1)\n    {\n      filename=$job.inputs.bams[0].path\n      paths=filename.split('/')\n      names=filename.split('/')[paths.length-1].split('.')\n      names[names.length-1]='and_more.freebayes.g.vcf'\n      return names.join('.')\n    }\n    filename=''\n  \tif ($job.inputs.bams instanceof Array)\n      filename = $job.inputs.bams[0].path\n    else\n      filename = $job.inputs.bams.path\n    \n    paths=filename.split('/')\n    names=filename.split('/')[paths.length-1].split('.')\n    names[names.length-1]='freebayes.g.vcf'\n    return names.join(\".\")\n  }\n  if ($job.inputs.VCF){\n    return $job.inputs.VCF + \".freebayes.vcf\"\n  }\n\tif ($job.inputs.bams instanceof Array && $job.inputs.bams.length>1) {\n  \t\tfilename = $job.inputs.bams[0].path\n  \t\tpaths = filename.split('/')\n  \t\tnames = filename.split('/')[paths.length-1].split('.')\n  \t\tnames[names.length-1] = 'and_more.freebayes.vcf'\n  \t\treturn names.join(\".\")\n\t}\n\tfilename=''\n  \tif ($job.inputs.bams instanceof Array)\n      filename = $job.inputs.bams[0].path\n    else\n      filename = $job.inputs.bams.path\n\t\n\tpaths = filename.split('/')\n\tnames = filename.split('/')[paths.length-1].split('.')\n\tnames[names.length-1] = 'freebayes.vcf'\n \treturn names.join(\".\")\n}\n  ",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:inheritMetadataFrom": "#bams"
            },
            "id": "#variants",
            "sbg:fileTypes": "VCF, G.VCF",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "Freebayes",
        "sbg:license": "MIT licence",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1479408953,
        "description": "FreeBayes is a Bayesian genetic variant detector designed to find small polymorphisms, specifically SNPs (single-nucleotide polymorphisms), indels (insertions and deletions), MNPs (multi-nucleotide polymorphisms), and complex events (composite insertion and substitution events) smaller than the length of a short-read sequencing alignment.\n\nFreeBayes incorporates a number of features in order to reduce the complexity of variant detection for researchers and developers:\n\n1. Indel realignment is accomplished internally using a read-independent method, and issues resulting from discordant alignments are dramatically reduced through the direct detection of haplotypes.\n2. The need for base quality recalibration is avoided through the direct detection of haplotypes. Sequencing platform errors tend to cluster (e.g. at the ends of reads), and generate unique, non-repeating haplotypes at a given locus.\n3. Variant quality recalibration is avoided by incorporating a number of metrics, such as read placement bias and allele balance, directly into the Bayesian model.\n\n###Common Issues\nFASTA INDEX FILE is not required. If it is not provided (as secondary file), it is generated. When it is provided, the tool runs faster.\nBAM INDEX FILES are not required, but when not provided (as separate input), random access is disabled.\nVARIANT INPUT INDEX FILE is required (as secondary file). It should be generated using Tabix BGZIP and Tabix Index file.\nREGION parameter should match data present in variant input file, both chromosome and positions.",
        "stdout": {
          "script": "{\n  if($job.inputs.gvcf) \n  {\n    if($job.inputs.bams instanceof Array && $job.inputs.bams.length>1)\n    {\n      filename=$job.inputs.bams[0].path\n      paths=filename.split('/')\n      names=filename.split('/')[paths.length-1].split('.')\n      names[names.length-1]='and_more.freebayes.g.vcf'\n      return names.join(\".\")\n    }\n    filename=''\n  \tif ($job.inputs.bams instanceof Array)\n      filename = $job.inputs.bams[0].path\n    else\n      filename = $job.inputs.bams.path\n    paths=filename.split('/')\n    names=filename.split('/')[paths.length-1].split('.')\n    names[names.length-1]='freebayes.g.vcf'\n    return names.join(\".\")\n  }\n  return \"\"\n}",
          "class": "Expression",
          "engine": "#cwl-js-engine"
        },
        "arguments": [
          {
            "separate": true,
            "valueFrom": {
              "script": "{\n  if ($job.inputs.VCF){\n    return \"-v \" + $job.inputs.VCF + \".freebayes.vcf\"\n  }\n  if(!$job.inputs.gvcf)\n  {\n    \n  \tif ($job.inputs.bams instanceof Array && $job.inputs.bams.length>1) {\n  \t\tfilename = $job.inputs.bams[0].path\n  \t\tpaths = filename.split('/')\n  \t\tnames = filename.split('/')[paths.length-1].split('.')\n  \t\tnames[names.length-1] = 'and_more.freebayes.vcf'\n  \t\treturn \"-v \" + names.join(\".\")\n  \t}\n\tfilename=''\n  \tif ($job.inputs.bams instanceof Array)\n      filename = $job.inputs.bams[0].path\n    else\n      filename = $job.inputs.bams.path\n  \tpaths = filename.split('/')\n  \tnames = filename.split('/')[paths.length-1].split('.')\n  \tnames[names.length-1] = 'freebayes.vcf'\n  \treturn \"-v \" + names.join(\".\")\n  }\n}\n  ",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "prefix": ""
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/fbd/79",
        "sbg:cmdPreview": "/opt/freebayes/bin/freebayes -f /path/to/reference.ext  -v bams.and_more.freebayes.vcf  /path/to/bams.ext  /path/to/bams.ext",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 1555.7142857142862,
        "requirements": [
          {
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Erik Garrison",
        "sbg:revision": 0,
        "stdin": "",
        "baseCommand": [
          "/opt/freebayes/bin/freebayes"
        ],
        "sbg:toolkit": "Freebayes",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "https://github.com/ekg/freebayes"
          },
          {
            "label": "Source code",
            "id": "https://github.com/ekg/freebayes"
          },
          {
            "label": "Download",
            "id": "https://github.com/ekg/freebayes"
          },
          {
            "label": "Publication",
            "id": "http://arxiv.org/pdf/1207.3907v2.pdf"
          },
          {
            "label": "Documentation",
            "id": "https://github.com/ekg/freebayes"
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/fbd/79",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1479408953,
        "sbg:job": {
          "inputs": {
            "observation_bias": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/observation_bias.ext"
            },
            "prob_contamination": 0,
            "bams": [
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/bams.ext"
              },
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/bams.ext"
              }
            ],
            "min_supporting_allele_qsum": 0,
            "ploidy": 0,
            "variant_input": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [
                {
                  "path": ".tbi"
                }
              ],
              "path": "/path/to/variant_input.ext"
            },
            "reference": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/reference.ext"
            },
            "region": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/region.ext"
            },
            "allele_balance_priors_off": true,
            "genotyping_max_iterations": 0,
            "cnv_map": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/cnv_map.ext"
            },
            "min_alternate_total": 0,
            "min_coverage": 0,
            "gvcf": false,
            "samples": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/samples.ext"
            },
            "bam_index_files": [
              {
                "size": 0,
                "class": "File",
                "secondaryFiles": [],
                "path": "/path/to/bais.ext"
              }
            ],
            "haplotype_basis_alleles": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [
                {
                  "path": ".tbi"
                }
              ],
              "path": "/path/to/haplotype_basis_alleles.ext"
            },
            "max_coverage": 0,
            "no_partial_observations": true,
            "max_complex_gap": 0,
            "read_max_mismatch_fraction": 0,
            "haplotype_length": 0,
            "use_duplicate_reads": true,
            "no_indels": true,
            "min_repeat_size": 0,
            "report_all_haplotype_alleles": true,
            "exclude_unobserved_genotypes": true,
            "binomial_obs_priors_off": true,
            "min_mapping_quality": 0,
            "min_base_quality": 0,
            "min_alternate_count": 0,
            "min_repeat_entropy": 0,
            "min_alternate_fraction": 0,
            "hwe_priors_off": true,
            "reference_quality": [
              10,
              10
            ],
            "standard_filters": true,
            "theta": 0,
            "pooled_discrete": true,
            "read_snp_limit": 0,
            "posterior_integration_limits": [
              5,
              4
            ],
            "min_alternate_qsum": 0,
            "dont_left_align_indels": true,
            "pvar": 0,
            "genotyping_max_banddepth": 0,
            "genotype_qualities": true,
            "no_mnps": true,
            "no_population_priors": true,
            "only_use_input_alleles": true,
            "pooled_continuous": true,
            "populations": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/populations.ext"
            },
            "report_monomorphic": true,
            "legacy_gls": true,
            "min_supporting_mapping_qsum": 0,
            "no_snps": true,
            "report_genotype_likelihood_max": true,
            "use_mapping_quality": true,
            "genotype_variant_threshold": 0,
            "read_dependence_factor": 0,
            "no_complex": true,
            "contamination_estimates": {
              "size": 0,
              "class": "File",
              "secondaryFiles": [],
              "path": "/path/to/contamination_estimates.ext"
            },
            "harmonic_indel_quality": true,
            "region_chr_stpos_endpos": "region_chr_stpos_endpos",
            "mismatch_base_quality_threshold": 0,
            "use_reference_allele": true,
            "use_best_n_alleles": 0,
            "gvcf_chunk": 10,
            "read_mismatch_limit": 0,
            "base_quality_cap": 0,
            "read_indel_limit": 0,
            "VCF": ""
          },
          "allocatedResources": {
            "mem": 2000,
            "cpu": 1
          }
        },
        "appUrl": "/u/Durga/exome-sequencing/apps/#Durga/exome-sequencing/fbd/0",
        "sbg:toolkitVersion": "v1.0.2",
        "inputs": [
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "secondaryFiles": [
                ".tbi"
              ],
              "prefix": "-@"
            },
            "label": "Variant input",
            "id": "#variant_input",
            "sbg:fileTypes": "VCF.GZ",
            "sbg:altPrefix": "--variant-input",
            "sbg:category": "Outputs",
            "description": "Use variants reported in VCF file as input to the algorithm. Variants in this file will included in the output even if there is not enough support in the data to pass input filters.",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-Z"
            },
            "label": "Use reference allele",
            "description": "This flag includes the reference allele in the analysis as if it is another sample from the same population.",
            "id": "#use_reference_allele",
            "sbg:altPrefix": "--use-reference-allele",
            "sbg:category": "Reference allele",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-j"
            },
            "label": "Use mapping quality",
            "description": "Use mapping quality of alleles when calculating data likelihoods.",
            "id": "#use_mapping_quality",
            "sbg:altPrefix": "--use-mapping-quality",
            "sbg:category": "Algorithmic features",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-4"
            },
            "label": "Use duplicate reads",
            "description": "Include duplicate-marked alignments in the analysis.",
            "id": "#use_duplicate_reads",
            "sbg:altPrefix": "--use-duplicate-reads",
            "sbg:category": "Input filters",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Use best n alleles",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-n"
            },
            "sbg:altPrefix": "--use-best-n-alleles",
            "id": "#use_best_n_alleles",
            "description": "Evaluate only the best N SNP alleles, ranked by sum of supporting quality scores.",
            "required": false,
            "sbg:category": "Allele scope"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0.001",
            "label": "Theta",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-T"
            },
            "sbg:altPrefix": "--theta",
            "id": "#theta",
            "description": "The expected mutation rate or pairwise nucleotide diversity among the population under analysis. This serves as the single parameter to the Ewens Sampling Formula prior model default: 0.001.",
            "required": false,
            "sbg:category": "Population model"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-0"
            },
            "label": "Standard filters",
            "description": "Use stringent input base and mapping quality filters. Equivalent to -m 30 -q 20 -R 0 -S 0.",
            "id": "#standard_filters",
            "sbg:altPrefix": "--standard-filters",
            "sbg:category": "Input filters",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-s"
            },
            "label": "Samples",
            "id": "#samples",
            "sbg:fileTypes": "TXT",
            "sbg:altPrefix": "--samples",
            "sbg:category": "Inputs",
            "description": "Limit analysis to samples listed (one per line) in the FILE. By default FreeBayes will analyze all samples in its input BAM files.",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--report-monomorphic"
            },
            "label": "Report monomorphic",
            "description": "Report even loci which appear to be monomorphic, and report all considered alleles, even those which are not in called genotypes. Loci which do not have any potential alternates have '.' for ALT.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#report_monomorphic",
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--report-genotype-likelihood-max"
            },
            "label": "Report genotype likelihood max",
            "description": "Report genotypes using the maximum-likelihood estimate provided from genotype likelihoods.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#report_genotype_likelihood_max",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--report-all-haplotype-alleles"
            },
            "label": "Report all haplotype alleles",
            "description": "At sites where genotypes are made over haplotype alleles, provide information about all alleles in output, not only those which are called.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#report_all_haplotype_alleles",
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-r"
            },
            "label": "Region",
            "description": "Limit analysis to the specified region, 0-base coordinates, end_position not included.",
            "id": "#region_chr_stpos_endpos",
            "sbg:altPrefix": "--region",
            "sbg:category": "Inputs",
            "type": [
              "null",
              "string"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-t"
            },
            "label": "Region",
            "description": "BED file with the region to process.",
            "sbg:fileTypes": "BED",
            "type": [
              "null",
              "File"
            ],
            "id": "#region",
            "required": false,
            "sbg:category": "Inputs"
          },
          {
            "sbg:toolDefaultValue": "100,60",
            "label": "Reference quality",
            "inputBinding": {
              "separate": true,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "--reference-quality"
            },
            "type": [
              "null",
              {
                "type": "array",
                "name": "reference_quality",
                "items": "int"
              }
            ],
            "id": "#reference_quality",
            "description": "Assign mapping quality of MQ to the reference allele at each site and base quality of BQ (default: 100,60).",
            "required": false,
            "sbg:category": "Reference allele"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-f"
            },
            "label": "Reference",
            "description": "The reference files in FASTA format.",
            "sbg:fileTypes": "FASTA",
            "type": [
              "File"
            ],
            "id": "#reference",
            "required": true,
            "sbg:category": "Inputs"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "unbounded",
            "label": "Read snp limit",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-$"
            },
            "sbg:altPrefix": "--read-snp-limit",
            "id": "#read_snp_limit",
            "description": "Exclude reads with more than N base mismatches, ignoring gaps with quality >= mismatch-base-quality-threshold.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "unbounded",
            "label": "Read mismatch limit",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-U"
            },
            "sbg:altPrefix": "--read-mismatch-limit",
            "id": "#read_mismatch_limit",
            "description": "Exclude reads with more than N mismatches where each mismatch has base quality >= mismatch-base-quality-threshold.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "1",
            "label": "Read max mismatch fraction",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-z"
            },
            "sbg:altPrefix": "--read-max-mismatch-fraction",
            "id": "#read_max_mismatch_fraction",
            "description": "Exclude reads with more than N [0,1] fraction of mismatches where each mismatch has base quality >= mismatch-base-quality-threshold.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "unbounded",
            "label": "Read indel limit",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-e"
            },
            "sbg:altPrefix": "--read-indel-limit",
            "id": "#read_indel_limit",
            "description": "Exclude reads with more than N separate gaps.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0.9",
            "label": "Read dependence factor",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-D"
            },
            "sbg:altPrefix": "--read-dependence-factor",
            "id": "#read_dependence_factor",
            "description": "Incorporate non-independence of reads by scaling successive observations by this factor during data likelihood calculations.",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Pvar",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-p"
            },
            "sbg:altPrefix": "--pvar",
            "id": "#pvar",
            "description": "Report sites if the probability that there is a polymorphism at the site is greater than N.  default: 0.0.  Note that post-filtering is generally recommended over the use of this parameter.",
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "sbg:toolDefaultValue": "10e-9",
            "label": "Prob contamination",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--prob-contamination"
            },
            "type": [
              "null",
              "float"
            ],
            "id": "#prob_contamination",
            "description": "An estimate of contamination to use for all samples.",
            "required": false,
            "sbg:category": "Genotype likelihoods"
          },
          {
            "type": [
              "null",
              {
                "type": "array",
                "name": "posterior_integration_limits",
                "items": "int"
              }
            ],
            "sbg:toolDefaultValue": "1,3",
            "label": "Posterior integration limits",
            "sbg:stageInput": null,
            "inputBinding": {
              "separate": true,
              "itemSeparator": ",",
              "sbg:cmdInclude": true,
              "prefix": "-W"
            },
            "sbg:altPrefix": "--posterior-integration-limits",
            "id": "#posterior_integration_limits",
            "description": "Integrate all genotype combinations in our posterior space which include no more than N samples with their Mth best data likelihood.",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--populations"
            },
            "label": "Populations",
            "description": "Each line of FILE should list a sample and a population which it is part of.  The population-based bayesian inference model will then be partitioned on the basis of the populations.",
            "sbg:fileTypes": "NO_EXTENSION",
            "type": [
              "null",
              "File"
            ],
            "id": "#populations",
            "required": false,
            "sbg:category": "Inputs"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-J"
            },
            "label": "Pooled discrete",
            "description": "Assume that samples result from pooled sequencing. Model pooled samples using discrete genotypes across pools. When using this flag, set --ploidy to the number of alleles in each sample or use the --cnv-map to define per-sample ploidy.",
            "id": "#pooled_discrete",
            "sbg:altPrefix": "--pooled-discrete",
            "sbg:category": "Population model",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-K"
            },
            "label": "Pooled continuous",
            "description": "Output all alleles which pass input filters, regardles of genotyping outcome or model.",
            "id": "#pooled_continuous",
            "sbg:altPrefix": "--pooled-continuous",
            "sbg:category": "Population model",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "2",
            "label": "Ploidy",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-p"
            },
            "sbg:altPrefix": "--ploidy",
            "id": "#ploidy",
            "description": "Sets the default ploidy for the analysis to N.",
            "required": false,
            "sbg:category": "Population model"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-l"
            },
            "label": "Only use input alleles",
            "description": "Only provide variant calls and genotype likelihoods for sites and alleles which are provided in the VCF input, and provide output in the VCF for all input alleles, not just those which have support in the data.",
            "id": "#only_use_input_alleles",
            "sbg:altPrefix": "--only-use-input-alleles",
            "sbg:category": "Outputs",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--observation-bias"
            },
            "label": "Observation bias",
            "description": "Read length-dependent allele observation biases from FILE. The format is [length] [alignment efficiency relative to reference] where the efficiency is 1 if there is no relative observation bias.",
            "sbg:fileTypes": "NO_EXTENSION",
            "type": [
              "null",
              "File"
            ],
            "id": "#observation_bias",
            "required": false,
            "sbg:category": "Genotype likelihoods"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-I"
            },
            "label": "No snps",
            "description": "Ignore SNP alleles.",
            "id": "#no_snps",
            "sbg:altPrefix": "--no-snps",
            "sbg:category": "Allele scope",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-k"
            },
            "label": "No population priors",
            "description": "Equivalent to --pooled-discrete --hwe-priors-off and removal of  Ewens Sampling Formula component of priors.",
            "id": "#no_population_priors",
            "sbg:altPrefix": "--no-population-priors",
            "sbg:category": "Population priors",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--no-partial-observations"
            },
            "label": "No partial observations",
            "description": "Exclude observations which do not fully span the dynamically-determined detection window.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#no_partial_observations",
            "required": false,
            "sbg:category": "Allele scope"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-X"
            },
            "label": "No mnps",
            "description": "Ignore multi-nuceotide polymorphisms, MNPs.",
            "id": "#no_mnps",
            "sbg:altPrefix": "--no-mnps",
            "sbg:category": "Allele scope",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-i"
            },
            "label": "No indels",
            "description": "Ignore insertion and deletion alleles.",
            "id": "#no_indels",
            "sbg:altPrefix": "--no-indels",
            "sbg:category": "Allele scope",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-u"
            },
            "label": "No complex",
            "description": "Ignore complex events (composites of other classes).",
            "id": "#no_complex",
            "sbg:altPrefix": "--no-complex",
            "sbg:category": "Allele scope",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "10",
            "label": "Mismatch base quality threshold",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-Q"
            },
            "sbg:altPrefix": "--mismatch-base-quality-threshold",
            "id": "#mismatch_base_quality_threshold",
            "description": "Count mismatches toward --read-mismatch-limit if the base quality of the mismatch is >= Q.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Min supporting mapping qsum",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-Y"
            },
            "sbg:altPrefix": "--min-supporting-mapping-qsum",
            "id": "#min_supporting_mapping_qsum",
            "description": "Consider any allele in which and the sum of mapping qualities of supporting reads is at least Q.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Min supporting allele qsum",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-R"
            },
            "sbg:altPrefix": "--min-supporting-allele-qsum",
            "id": "#min_supporting_allele_qsum",
            "description": "Consider any allele in which the sum of qualities of supporting observations is at least Q.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "sbg:toolDefaultValue": "5",
            "label": "Min repeat size",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--min-repeat-size"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#min_repeat_size",
            "description": "When assembling observations across repeats, require the total repeat length at least this many bp.",
            "required": false,
            "sbg:category": "Allele scope"
          },
          {
            "sbg:toolDefaultValue": "0",
            "label": "Min repeat entropy",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--min-repeat-entropy"
            },
            "type": [
              "null",
              "float"
            ],
            "id": "#min_repeat_entropy",
            "description": "To detect interrupted repeats, build across sequence until it has entropy > N bits per bp.",
            "required": false,
            "sbg:category": "Allele scope"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "1",
            "label": "Min mapping quality",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-m"
            },
            "sbg:altPrefix": "--min-mapping-quality",
            "id": "#min_mapping_quality",
            "description": "Exclude alignments from analysis if they have a mapping quality less than Q.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "sbg:toolDefaultValue": "0",
            "label": "Min coverage",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--min-coverage"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#min_coverage",
            "description": "Require at least this coverage to process a site.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Min base quality",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-q"
            },
            "sbg:altPrefix": "--min-base-quality",
            "id": "#min_base_quality",
            "description": "Exclude alleles from analysis if their supporting base quality is less than Q.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "1",
            "label": "Min alternate total",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-G"
            },
            "sbg:altPrefix": "min-alternate-total",
            "id": "#min_alternate_total",
            "description": "Require at least this count of observations supporting an alternate allele within the total population in order to use the allele in analysis.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0",
            "label": "Min alternate qsum",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-3"
            },
            "sbg:altPrefix": "--min-alternate-qsum",
            "id": "#min_alternate_qsum",
            "description": "Require at least this sum of quality of observations supporting an alternate allele within a single individual in order to evaluate the position.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "float"
            ],
            "sbg:toolDefaultValue": "0.2",
            "label": "Min alternate fraction",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-F"
            },
            "sbg:altPrefix": "--min-alternate-fraction",
            "id": "#min_alternate_fraction",
            "description": "Require at least this fraction of observations supporting an alternate allele within a single individual in the in order to evaluate the position.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "2",
            "label": "Min alternate count",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-C"
            },
            "sbg:altPrefix": "--min-alternate-count",
            "id": "#min_alternate_count",
            "description": "Require at least this count of observations supporting an alternate allele within a single individual in order to evaluate the position.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "sbg:toolDefaultValue": "no limit",
            "label": "Max coverage",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--max-coverage"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#max_coverage",
            "description": "Do not process sites with greater than this coverage.",
            "required": false,
            "sbg:category": "Input filters"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-E"
            },
            "label": "Max complex gap",
            "description": "Maximum complex gap.",
            "id": "#max_complex_gap",
            "sbg:altPrefix": "--max-complex-gap",
            "sbg:category": "Allele scope",
            "type": [
              "null",
              "int"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--legacy-gls"
            },
            "label": "Legacy gls",
            "description": "Use legacy (polybayes equivalent) genotype likelihood calculations.",
            "type": [
              "null",
              "boolean"
            ],
            "id": "#legacy_gls",
            "required": false,
            "sbg:category": "Genotype likelihoods"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-w"
            },
            "label": "Hwe priors off",
            "description": "Disable estimation of the probability of the combination arising under HWE given the allele frequency as estimated by observation frequency.",
            "id": "#hwe_priors_off",
            "sbg:altPrefix": "--hwe-priors-off",
            "sbg:category": "Mappability priors",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-H"
            },
            "label": "Harmonic indel quality",
            "description": "Use a weighted sum of base qualities around an indel, scaled by the distance from the indel.  By default use a minimum BQ in flanking sequence.",
            "id": "#harmonic_indel_quality",
            "sbg:altPrefix": "--harmonic-indel-quality",
            "sbg:category": "Algorithmic features",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "sbg:toolDefaultValue": "3",
            "label": "Haplotype length",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--haplotype-length"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#haplotype_length",
            "description": "Allow haplotype calls with contiguous embedded matches of up to this length.",
            "required": false,
            "sbg:category": "Allele scope"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "secondaryFiles": [
                ".tbi"
              ],
              "prefix": "--haplotype-basis-alleles"
            },
            "label": "Haplotype basis alleles",
            "description": "When specified, only variant alleles provided in this input VCF will be used for the construction of complex or haplotype alleles.",
            "sbg:fileTypes": "VCF.GZ",
            "type": [
              "null",
              "File"
            ],
            "id": "#haplotype_basis_alleles",
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "description": "When writing gVCF output emit a record for every NUM bases.",
            "label": "GVCF chunk",
            "sbg:stageInput": null,
            "id": "#gvcf_chunk",
            "type": [
              "null",
              "int"
            ],
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--gvcf-chunk"
            },
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "sbg:toolDefaultValue": "True",
            "label": "GVCF",
            "sbg:stageInput": null,
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--gvcf"
            },
            "type": [
              "null",
              "boolean"
            ],
            "id": "#gvcf",
            "description": "Write gVCF output, which indicates coverage in uncalled regions.",
            "required": false,
            "sbg:category": "Outputs"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "1000",
            "label": "Genotyping max iterations",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-B"
            },
            "sbg:altPrefix": "--genotyping-max-iterations",
            "id": "#genotyping_max_iterations",
            "description": "Iterate no more than N times during genotyping step.",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "sbg:toolDefaultValue": "6",
            "label": "Genotyping max banddepth",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--genotyping-max-banddepth"
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#genotyping_max_banddepth",
            "description": "Integrate no deeper than the Nth best genotype by likelihood when genotyping.",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "type": [
              "null",
              "int"
            ],
            "sbg:toolDefaultValue": "unbounded",
            "label": "Genotype variant threshold",
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-S"
            },
            "sbg:altPrefix": "--genotype-variant-threshold",
            "id": "#genotype_variant_threshold",
            "description": "Limit posterior integration to samples where the second-best genotype likelihood is no more than log(N) from the highest genotype likelihood for the sample.",
            "required": false,
            "sbg:category": "Algorithmic features"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-="
            },
            "label": "Genotype qualities",
            "description": "Calculate the marginal probability of genotypes and report as GQ in each sample field in the VCF output.",
            "id": "#genotype_qualities",
            "sbg:altPrefix": "--genotype-qualities",
            "sbg:category": "Algorithmic features",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-N"
            },
            "label": "Exclude unobserved genotypes",
            "description": "Skip sample genotypings for which the sample has no supporting reads.",
            "id": "#exclude_unobserved_genotypes",
            "sbg:altPrefix": "--exclude-unobserved-genotypes",
            "sbg:category": "Algorithmic features",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-O"
            },
            "label": "Dont left align indels",
            "description": "Turn off left-alignment of indels, which is enabled by default.",
            "id": "#dont_left_align_indels",
            "sbg:altPrefix": "--dont-left-align-indels",
            "sbg:category": "Indel realignment",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--contamination-estimates"
            },
            "label": "Contamination estimates",
            "description": "A file containing per-sample estimates of contamination, such as those generated by VerifyBamID.  The format should be: sample p(read=R|genotype=AR) p(read=A|genotype=AA) Sample '*' can be used to set default contamination estimates.",
            "sbg:fileTypes": "NO_EXTENSION",
            "type": [
              "null",
              "File"
            ],
            "id": "#contamination_estimates",
            "required": false,
            "sbg:category": "Genotype likelihoods"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-A"
            },
            "label": "CNV map",
            "id": "#cnv_map",
            "sbg:fileTypes": "BED",
            "sbg:altPrefix": "--cnv-map",
            "sbg:category": "Inputs",
            "description": "Read a copy number map from the BED file FILE, which has the format: reference sequence, start, end, sample name, copy number... for each region in each sample which does not have the default copy number as set by --ploidy.",
            "type": [
              "null",
              "File"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-V"
            },
            "label": "Binomial obs priors off",
            "description": "Disable incorporation of prior expectations about observations. Uses read placement probability, strand balance probability, and read position (5'-3') probability.",
            "id": "#binomial_obs_priors_off",
            "sbg:altPrefix": "--binomial-obs-priors-off",
            "sbg:category": "Mappability priors",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "--base-quality-cap"
            },
            "label": "Base quality cap",
            "description": "Limit estimated observation quality by capping base quality at Q.",
            "type": [
              "null",
              "float"
            ],
            "id": "#base_quality_cap",
            "required": false,
            "sbg:category": "Genotype likelihoods"
          },
          {
            "inputBinding": {
              "position": 100,
              "separate": true,
              "sbg:cmdInclude": true,
              "itemSeparator": null
            },
            "label": "Bam files",
            "description": "Bam files.",
            "sbg:fileTypes": "BAM",
            "type": [
              {
                "type": "array",
                "name": "bams",
                "items": "File"
              }
            ],
            "id": "#bams",
            "required": true,
            "sbg:category": "Inputs"
          },
          {
            "description": "Index files for input bam files.",
            "label": "Bam index files",
            "sbg:stageInput": "copy",
            "id": "#bam_index_files",
            "sbg:fileTypes": "BAI",
            "type": [
              "null",
              {
                "type": "array",
                "name": "bam_index_files",
                "items": "File"
              }
            ],
            "required": false,
            "sbg:category": "Inputs"
          },
          {
            "inputBinding": {
              "separate": true,
              "sbg:cmdInclude": true,
              "prefix": "-a"
            },
            "label": "Allele balance priors off",
            "description": "Disable use of aggregate probability of observation balance between alleles as a component of the priors.",
            "id": "#allele_balance_priors_off",
            "sbg:altPrefix": "--allele-balance-priors-off",
            "sbg:category": "Mappability priors",
            "type": [
              "null",
              "boolean"
            ],
            "required": false
          },
          {
            "description": "Name of the VCF file to be written (without the .vcf extension). If not provided, will be calculated from the BAM files.",
            "label": "VCF Name",
            "id": "#VCF",
            "type": [
              "null",
              "string"
            ],
            "required": false,
            "sbg:category": "Outputs"
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 101.13281250000004,
        "sbg:id": "Durga/exome-sequencing/fbd/0"
      },
      "id": "#Freebayes",
      "inputs": [
        {
          "id": "#Freebayes.variant_input"
        },
        {
          "id": "#Freebayes.use_reference_allele"
        },
        {
          "id": "#Freebayes.use_mapping_quality"
        },
        {
          "id": "#Freebayes.use_duplicate_reads"
        },
        {
          "id": "#Freebayes.use_best_n_alleles"
        },
        {
          "id": "#Freebayes.theta"
        },
        {
          "id": "#Freebayes.standard_filters"
        },
        {
          "id": "#Freebayes.samples"
        },
        {
          "id": "#Freebayes.report_monomorphic"
        },
        {
          "id": "#Freebayes.report_genotype_likelihood_max"
        },
        {
          "id": "#Freebayes.report_all_haplotype_alleles"
        },
        {
          "id": "#Freebayes.region_chr_stpos_endpos"
        },
        {
          "id": "#Freebayes.region"
        },
        {
          "id": "#Freebayes.reference_quality"
        },
        {
          "source": [
            "#SBG_FASTA_Indices.fasta_reference"
          ],
          "id": "#Freebayes.reference"
        },
        {
          "id": "#Freebayes.read_snp_limit"
        },
        {
          "id": "#Freebayes.read_mismatch_limit"
        },
        {
          "id": "#Freebayes.read_max_mismatch_fraction"
        },
        {
          "id": "#Freebayes.read_indel_limit"
        },
        {
          "id": "#Freebayes.read_dependence_factor"
        },
        {
          "id": "#Freebayes.pvar"
        },
        {
          "id": "#Freebayes.prob_contamination"
        },
        {
          "id": "#Freebayes.posterior_integration_limits"
        },
        {
          "id": "#Freebayes.populations"
        },
        {
          "id": "#Freebayes.pooled_discrete"
        },
        {
          "id": "#Freebayes.pooled_continuous"
        },
        {
          "id": "#Freebayes.ploidy"
        },
        {
          "id": "#Freebayes.only_use_input_alleles"
        },
        {
          "id": "#Freebayes.observation_bias"
        },
        {
          "id": "#Freebayes.no_snps"
        },
        {
          "id": "#Freebayes.no_population_priors"
        },
        {
          "id": "#Freebayes.no_partial_observations"
        },
        {
          "id": "#Freebayes.no_mnps"
        },
        {
          "id": "#Freebayes.no_indels"
        },
        {
          "id": "#Freebayes.no_complex"
        },
        {
          "id": "#Freebayes.mismatch_base_quality_threshold"
        },
        {
          "id": "#Freebayes.min_supporting_mapping_qsum"
        },
        {
          "id": "#Freebayes.min_supporting_allele_qsum"
        },
        {
          "id": "#Freebayes.min_repeat_size"
        },
        {
          "id": "#Freebayes.min_repeat_entropy"
        },
        {
          "id": "#Freebayes.min_mapping_quality"
        },
        {
          "id": "#Freebayes.min_coverage"
        },
        {
          "id": "#Freebayes.min_base_quality"
        },
        {
          "id": "#Freebayes.min_alternate_total"
        },
        {
          "id": "#Freebayes.min_alternate_qsum"
        },
        {
          "id": "#Freebayes.min_alternate_fraction"
        },
        {
          "id": "#Freebayes.min_alternate_count"
        },
        {
          "id": "#Freebayes.max_coverage"
        },
        {
          "id": "#Freebayes.max_complex_gap"
        },
        {
          "id": "#Freebayes.legacy_gls"
        },
        {
          "id": "#Freebayes.hwe_priors_off"
        },
        {
          "id": "#Freebayes.harmonic_indel_quality"
        },
        {
          "id": "#Freebayes.haplotype_length"
        },
        {
          "id": "#Freebayes.haplotype_basis_alleles"
        },
        {
          "id": "#Freebayes.gvcf_chunk"
        },
        {
          "id": "#Freebayes.gvcf"
        },
        {
          "id": "#Freebayes.genotyping_max_iterations"
        },
        {
          "id": "#Freebayes.genotyping_max_banddepth"
        },
        {
          "id": "#Freebayes.genotype_variant_threshold"
        },
        {
          "id": "#Freebayes.genotype_qualities"
        },
        {
          "id": "#Freebayes.exclude_unobserved_genotypes"
        },
        {
          "id": "#Freebayes.dont_left_align_indels"
        },
        {
          "id": "#Freebayes.contamination_estimates"
        },
        {
          "id": "#Freebayes.cnv_map"
        },
        {
          "id": "#Freebayes.binomial_obs_priors_off"
        },
        {
          "id": "#Freebayes.base_quality_cap"
        },
        {
          "source": [
            "#GATK_IndelRealigner.realigned_bam_file"
          ],
          "id": "#Freebayes.bams"
        },
        {
          "id": "#Freebayes.bam_index_files"
        },
        {
          "id": "#Freebayes.allele_balance_priors_off"
        },
        {
          "id": "#Freebayes.VCF"
        }
      ],
      "outputs": [
        {
          "id": "#Freebayes.variants"
        }
      ],
      "sbg:y": 101.13281250000004,
      "sbg:x": 1555.7142857142862
    },
    {
      "run": {
        "sbg:revisionsInfo": [
          {
            "sbg:modifiedOn": 1478014735,
            "sbg:revision": 0,
            "sbg:modifiedBy": "Durga",
            "sbg:revisionNotes": "Copy of admin/sbg-public-data/picard-buildbamindex-1-140/4"
          }
        ],
        "temporaryFailCodes": [],
        "hints": [
          {
            "dockerImageId": "eab0e70b6629",
            "class": "DockerRequirement",
            "dockerPull": "images.sbgenomics.com/mladenlsbg/picard:1.140"
          },
          {
            "value": 1,
            "class": "sbg:CPURequirement"
          },
          {
            "value": {
              "script": "{\n  if($job.inputs.memory_per_job){\n  \treturn $job.inputs.memory_per_job\n  }\n  \treturn 2048\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "class": "sbg:MemRequirement"
          }
        ],
        "sbg:modifiedBy": "Durga",
        "sbg:categories": [
          "SAM/BAM-Processing"
        ],
        "sbg:project": "Durga/durgafiles",
        "id": "Durga/durgafiles/picard-buildbamindex-1-140/0",
        "outputs": [
          {
            "description": "The BAM index file. Defaults to x.bai if INPUT is x.bam, otherwise INPUT.bai. If INPUT is a URL and OUTPUT is unspecified, defaults to a file in the current directory.",
            "label": "Indexed BAM",
            "outputBinding": {
              "secondaryFiles": [
                "^.bai",
                ".bai"
              ],
              "glob": {
                "script": "{ if (!$job.inputs.output_index){\n  return '*.bam'\n}\n}",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:inheritMetadataFrom": "#input_bam",
              "sbg:metadata": {
                "__inherit__": "input_file"
              }
            },
            "id": "#indexed_bam",
            "sbg:fileTypes": "BAM, BAI",
            "type": [
              "null",
              "File"
            ]
          },
          {
            "description": "Indexed BAM.",
            "label": "Indexed BAM (.BAI)",
            "outputBinding": {
              "glob": {
                "script": "{ if ($job.inputs.output_index === true){\n  return '*.bai'\n}\n\n}",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:inheritMetadataFrom": "#input_bam"
            },
            "id": "#index",
            "sbg:fileTypes": "BAI",
            "type": [
              "null",
              "File"
            ]
          }
        ],
        "label": "Picard BuildBamIndex",
        "sbg:license": "MIT License, Apache 2.0 Licence",
        "sbg:contributors": [
          "Durga"
        ],
        "sbg:createdOn": 1478014735,
        "description": "Picard BuildBamIndex generates a BAM index (.bai) file.",
        "stdout": "",
        "arguments": [
          {
            "separate": false,
            "valueFrom": {
              "script": "{\n  if ((!(typeof $job.inputs.input_bai !== \"undefined\")))\n  {\n    {\n  filename = $job.inputs.input_bam.path\n  return 'OUTPUT='+filename.split('.').slice(0, -1).concat(\"bam.bai\").join(\".\").replace(/^.*[\\\\\\/]/, '')\n}\n  }\n}",
              "class": "Expression",
              "engine": "#cwl-js-engine"
            },
            "prefix": ""
          }
        ],
        "sbg:copyOf": "admin/sbg-public-data/picard-buildbamindex-1-140/4",
        "sbg:cmdPreview": "java -Xmx2048M -jar /opt/picard-tools-1.140/picard.jar BuildBamIndex OUTPUT=example.bam.bai INPUT=example.bam",
        "sbg:createdBy": "Durga",
        "sbg:sbgMaintained": false,
        "sbg:validationErrors": [],
        "x": 1051.5240709603368,
        "requirements": [
          {
            "engineCommand": "cwl-engine.js",
            "class": "ExpressionEngineRequirement",
            "requirements": [
              {
                "class": "DockerRequirement",
                "dockerPull": "rabix/js-engine"
              }
            ],
            "id": "#cwl-js-engine"
          }
        ],
        "sbg:toolAuthor": "Broad Institute",
        "sbg:revision": 0,
        "stdin": "",
        "baseCommand": [
          {
            "script": "{\n  if (typeof $job.inputs.input_bai !== \"undefined\"){\n \treturn\"echo Skipping index step because BAI file is provided on the input.\"\n  }\n  else{\n    if($job.inputs.memory_per_job){\n      return 'java -Xmx'.concat($job.inputs.memory_per_job, 'M -jar /opt/picard-tools-1.140/picard.jar BuildBamIndex')\n  }   \n  \treturn 'java -Xmx2048M -jar /opt/picard-tools-1.140/picard.jar BuildBamIndex'\n  }\n}\n\n\n",
            "class": "Expression",
            "engine": "#cwl-js-engine"
          }
        ],
        "sbg:toolkit": "Picard",
        "sbg:links": [
          {
            "label": "Homepage",
            "id": "http://broadinstitute.github.io/picard/index.html"
          },
          {
            "label": "Source Code",
            "id": "https://github.com/broadinstitute/picard/releases/tag/1.140"
          },
          {
            "label": "Wiki",
            "id": "http://broadinstitute.github.io/picard/"
          },
          {
            "label": "Download",
            "id": "https://github.com/broadinstitute/picard/zipball/master"
          },
          {
            "label": "Publication",
            "id": "http://broadinstitute.github.io/picard/"
          }
        ],
        "sbg:latestRevision": 0,
        "sbg:revisionNotes": "Copy of admin/sbg-public-data/picard-buildbamindex-1-140/4",
        "sbg:image_url": null,
        "sbg:modifiedOn": 1478014735,
        "sbg:job": {
          "inputs": {
            "output_index": false,
            "verbosity": "DEBUG",
            "compression_level": null,
            "input_bam": {
              "path": "root/dir/example.bam"
            },
            "validation_stringency": "SILENT",
            "max_records_in_ram": null,
            "memory_per_job": 0
          },
          "allocatedResources": {
            "mem": 2048,
            "cpu": 1
          }
        },
        "appUrl": "/u/Durga/durgafiles/apps/#Durga/durgafiles/picard-buildbamindex-1-140/0",
        "sbg:toolkitVersion": "1.140",
        "inputs": [
          {
            "sbg:toolDefaultValue": "INFO",
            "label": "Verbosity",
            "inputBinding": {
              "position": 7,
              "separate": false,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n  {\n    if ($job.inputs.verbosity)\n    \treturn $job.inputs.verbosity\n  }\n}\n\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "VERBOSITY="
            },
            "type": [
              "null",
              {
                "type": "enum",
                "name": "verbosity",
                "symbols": [
                  "ERROR",
                  "WARNING",
                  "INFO",
                  "DEBUG"
                ]
              }
            ],
            "id": "#verbosity",
            "description": "Control verbosity of logging. Default value: INFO. This option can be set to 'null' to clear the default value. Possible values: {ERROR, WARNING, INFO, DEBUG}.",
            "required": false,
            "sbg:category": "Options"
          },
          {
            "sbg:toolDefaultValue": "SILENT",
            "label": "Validation stringency",
            "inputBinding": {
              "separate": false,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n{\n  if ($job.inputs.validation_stringency)\n  {\n    return $job.inputs.validation_stringency\n  }\n  else\n  {\n    return \"SILENT\"\n  }\n}\n}",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "VALIDATION_STRINGENCY="
            },
            "type": [
              "null",
              {
                "type": "enum",
                "name": "validation_stringency",
                "symbols": [
                  "STRICT",
                  "LENIENT",
                  "SILENT"
                ]
              }
            ],
            "id": "#validation_stringency",
            "description": "Validation stringency for all SAM files read by this program. Setting stringency to SILENT can improve performance when processing a BAM file in which variable-length data (read, qualities, tags) do not otherwise need to be decoded. Default value: STRICT. This option can be set to 'null' to clear the default value. Possible values: {STRICT, LENIENT, SILENT}.",
            "required": false,
            "sbg:category": "Options"
          },
          {
            "sbg:toolDefaultValue": "False",
            "label": "Quiet",
            "inputBinding": {
              "separate": false,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n  {\n    if ($job.inputs.quiet)\n    \treturn $job.inputs.quiet\n  }\n}\n\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "QUIET="
            },
            "type": [
              "null",
              {
                "type": "enum",
                "name": "quiet",
                "symbols": [
                  "True",
                  "False"
                ]
              }
            ],
            "id": "#quiet",
            "description": "This parameter indicates whether to suppress job-summary info on System.err. Default value: False. This option can be set to 'null' to clear the default value. Possible values: {True, False}",
            "required": false,
            "sbg:category": "Options"
          },
          {
            "sbg:toolDefaultValue": "False",
            "label": "Output only index file",
            "id": "#output_index",
            "type": [
              "null",
              "boolean"
            ],
            "description": "Don\u2019t output BAM file. This parameter is used if you only want to output only index file.",
            "required": false,
            "sbg:category": "Options"
          },
          {
            "sbg:toolDefaultValue": "2048",
            "label": "Memory per job",
            "id": "#memory_per_job",
            "type": [
              "null",
              "int"
            ],
            "description": "Amount of RAM memory to be used per job. Defaults to 2048 MB for single threaded jobs.",
            "required": false,
            "sbg:category": "Execution options"
          },
          {
            "sbg:toolDefaultValue": "500000",
            "label": "Max records in RAM",
            "inputBinding": {
              "separate": true,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n  {\n    if ($job.inputs.max_records_in_ram)\n    \treturn $job.inputs.max_records_in_ram\n  }\n}\n\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "MAX_RECORDS_IN_RAM="
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#max_records_in_ram",
            "description": "When writing SAM files that need to be sorted, this will specify the number of records stored in RAM before spilling to disk. Increasing this number reduces the number of file handles needed to sort a SAM file, and increases the amount of RAM needed. Default value: 500000. This option can be set to 'null' to clear the default value.",
            "required": false,
            "sbg:category": "Options"
          },
          {
            "inputBinding": {
              "position": 1,
              "separate": false,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n  {\n    if ($job.inputs.input_bam)\n    \treturn $job.inputs.input_bam.path.split('/').slice(-1)[0]\n  }\n}\n\n\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "INPUT="
            },
            "label": "Input BAM",
            "sbg:stageInput": "link",
            "id": "#input_bam",
            "sbg:fileTypes": "BAM",
            "sbg:altPrefix": "I",
            "sbg:category": "File inputs",
            "description": "A BAM file or URL to process. Must be sorted in coordinate order.  Required.",
            "type": [
              "File"
            ],
            "required": true
          },
          {
            "description": "Input BAI file.",
            "label": "Input BAI",
            "sbg:stageInput": "link",
            "id": "#input_bai",
            "sbg:fileTypes": "BAI",
            "type": [
              "null",
              "File"
            ],
            "required": false,
            "sbg:category": "File inputs"
          },
          {
            "sbg:toolDefaultValue": "5",
            "label": "Compression level",
            "inputBinding": {
              "separate": false,
              "valueFrom": {
                "script": "{\n  if (!(typeof $job.inputs.input_bai !== \"undefined\"))\n  {\n    if ($job.inputs.compression_level)\n    \treturn $job.inputs.compression_level\n  }\n}\n\n",
                "class": "Expression",
                "engine": "#cwl-js-engine"
              },
              "sbg:cmdInclude": true,
              "prefix": "COMPRESSION_LEVEL="
            },
            "type": [
              "null",
              "int"
            ],
            "id": "#compression_level",
            "description": "Compression level for all compressed files created (e.g. BAM and GELI). Default value: 5. This option can be set to 'null' to clear the default value.",
            "required": false,
            "sbg:category": "Options"
          }
        ],
        "class": "CommandLineTool",
        "successCodes": [],
        "y": 202.96214764200815,
        "sbg:id": "Durga/durgafiles/picard-buildbamindex-1-140/0"
      },
      "id": "#Picard_BuildBamIndex",
      "inputs": [
        {
          "id": "#Picard_BuildBamIndex.verbosity"
        },
        {
          "id": "#Picard_BuildBamIndex.validation_stringency"
        },
        {
          "id": "#Picard_BuildBamIndex.quiet"
        },
        {
          "id": "#Picard_BuildBamIndex.output_index"
        },
        {
          "id": "#Picard_BuildBamIndex.memory_per_job"
        },
        {
          "id": "#Picard_BuildBamIndex.max_records_in_ram"
        },
        {
          "source": [
            "#Sambamba_Merge.merged_bam"
          ],
          "id": "#Picard_BuildBamIndex.input_bam"
        },
        {
          "id": "#Picard_BuildBamIndex.input_bai"
        },
        {
          "id": "#Picard_BuildBamIndex.compression_level"
        }
      ],
      "outputs": [
        {
          "id": "#Picard_BuildBamIndex.indexed_bam"
        },
        {
          "id": "#Picard_BuildBamIndex.index"
        }
      ],
      "sbg:y": 202.96214764200815,
      "sbg:x": 1051.5240709603368
    }
  ],
  "sbg:canvas_zoom": 0.6999999999999997,
  "label": "ExomeSeqAnalysis02-RemoveSortAddParameters",
  "sbg:revision": 5,
  "requirements": [],
  "sbg:latestRevision": 8,
  "sbg:revisionNotes": "unlocked Read_group_header parameter",
  "sbg:image_url": "https://cgc-brood.sbgenomics.com/static/Durga/exome-sequencing/exomeseqanalysis02-removesortaddparameters/5.png",
  "sbg:modifiedOn": 1483475270,
  "sbg:canvas_x": -120,
  "id": "https://cgc-api.sbgenomics.com/v2/apps/Durga/exome-sequencing/exomeseqanalysis02-removesortaddparameters/5/raw/",
  "inputs": [
    {
      "label": "reference",
      "id": "#reference",
      "sbg:fileTypes": "FASTA,FA,FA.GZ,FASTA.GZ,TAR",
      "type": [
        "File"
      ],
      "sbg:y": 83.13114356914804,
      "sbg:x": -52.14285203388762
    },
    {
      "label": "target_intervals",
      "sbg:y": 234.36536170567715,
      "id": "#target_intervals",
      "sbg:fileTypes": "TXT,INTERVALS",
      "type": [
        "File"
      ],
      "sbg:includeInPorts": true,
      "sbg:x": -67.23809353834898
    },
    {
      "label": "fastq_list",
      "id": "#fastq_list",
      "sbg:fileTypes": "FASTQ, FQ, FASTQ.GZ, FQ.GZ",
      "type": [
        {
          "type": "array",
          "name": "fastq_list",
          "items": "File"
        }
      ],
      "sbg:y": 502.85710527458724,
      "sbg:x": -170.0000032502789,
      "batchType": [
        "metadata.sample_id"
      ]
    }
  ],
  "class": "Workflow",
  "sbg:createdBy": "Durga",
  "sbg:id": "Durga/exome-sequencing/exomeseqanalysis02-removesortaddparameters/5"
}
